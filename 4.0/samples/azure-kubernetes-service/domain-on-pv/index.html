<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.108.0">
    <meta name="description" content="Sample for creating a WebLogic domain home on an existing PV or PVC on the Azure Kubernetes Service.">


    <link rel="icon" href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/images/favicon.png" type="image/png">

    <title>Domain home on a PV :: WebLogic Kubernetes Operator</title>

    
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/nucleus.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/fontawesome-all.min.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/hybrid.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/featherlight.min.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/perfect-scrollbar.min.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/auto-complete.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/atom-one-dark-reasonable.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/theme.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/tabs.css?1711250416" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/css/hugo-theme.css?1711250416" rel="stylesheet">
    
    

    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/jquery-3.6.0.min.js?1711250416"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/domain-on-pv/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://oracle.github.io/weblogic-kubernetes-operator/4.0">
  <img src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/images/logo.png" height="90"><br/>
  WebLogic Kubernetes Operator
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/lunr.min.js?1711250416"></script>
<script type="text/javascript" src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/auto-complete.js?1711250416"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/oracle.github.io\/weblogic-kubernetes-operator\/4.0";
    
</script>
<script type="text/javascript" src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/search.js?1711250416"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
      <li><a  class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/4.0">Home</a></li>
        
          
          




 
  
    
    <li data-nav-id="/quickstart/" title="Quick Start" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/">
          <b> </b>Quick Start
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/quickstart/install/" title="Install the operator and ingress controller" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/install/">
        Install the operator and ingress controller
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/quickstart/prepare/" title="Prepare for a domain" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/prepare/">
        Prepare for a domain
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/quickstart/create-domain/" title="Create a domain" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/create-domain/">
        Create a domain
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/quickstart/cleanup/" title="Clean up" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/cleanup/">
        Clean up
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/quickstart/summary/" title="Under the covers" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/quickstart/summary/">
        Under the covers
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/introduction/" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/">
          <b> </b>Introduction
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/introduction/terms/" title="Important terms" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/terms/">
        Important terms
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/design/" title="Design philosophy" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/design/">
        Design philosophy
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/architecture/" title="Architecture" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/architecture/">
        Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/get-help/" title="Get help" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/get-help/">
        Get help
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/prerequisites/introduction/" title="Operator prerequisites" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/prerequisites/introduction/">
        Operator prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/platforms/environments/" title="Supported environments" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/introduction/platforms/environments/">
        Supported environments
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/managing-operators/" title="Manage operators" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/">
          <b> </b>Manage operators
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/overview/" title="Overview" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/overview/">
        Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/preparation/" title="Prepare for installation" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/preparation/">
        Prepare for installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/installation/" title="Installation and upgrade" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/installation/">
        Installation and upgrade
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/conversion-webhook/" title="Domain upgrade" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/conversion-webhook/">
        Domain upgrade
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/using-helm/" title="Configuration reference" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/using-helm/">
        Configuration reference
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/namespace-management/" title="Namespace management" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/namespace-management/">
        Namespace management
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/service-accounts/" title="Service accounts" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/service-accounts/">
        Service accounts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/rbac/" title="RBAC" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/rbac/">
        RBAC
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/the-rest-api/" title="REST services" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/the-rest-api/">
        REST services
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/k8s-setup/" title="Set up Kubernetes" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/k8s-setup/">
        Set up Kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/common-mistakes/" title="Common mistakes and solutions" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/common-mistakes/">
        Common mistakes and solutions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-operators/troubleshooting/" title="Troubleshooting" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/troubleshooting/">
        Troubleshooting
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/managing-domains/" title="Manage domains" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/">
          Manage domains
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/manage-domains/" title="About WebLogic domains" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/manage-domains/">
        About WebLogic domains
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/choosing-a-model/" title="Choose a domain home source type" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/choosing-a-model/">
          Choose a domain home source type
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-resource/" title="Domain and Cluster resources" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-resource/">
        <b> </b>Domain and Cluster resources
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/upgrade-domain-resource/" title="Upgrade Domain resource" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/upgrade-domain-resource/">
          <b> </b>Upgrade Domain resource
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/prepare/" title="Prepare to run a domain" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/prepare/">
        Prepare to run a domain
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/model-in-image/" title="Model in Image" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/">
          <b> </b>Model in Image
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/model-in-image/overview/" title="Overview" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/overview/">
        <b> </b>Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/model-in-image/usage/" title="Usage" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/usage/">
        <b> </b>Usage
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/model-in-image/auxiliary-images/" title="Auxiliary images" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/auxiliary-images/">
        <b> </b>Auxiliary images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/model-in-image/model-files/" title="Model files" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/model-files/">
        <b> </b>Model files
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/model-in-image/runtime-updates/" title="Runtime updates" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/model-in-image/runtime-updates/">
        <b> </b>Runtime updates
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/configoverrides/" title="Configuration overrides" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/configoverrides/">
          <b> </b>Configuration overrides
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/persistent-storage/" title="Persistent volumes" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/persistent-storage/">
          <b> </b>Persistent volumes
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/persistent-storage/host-paths/" title="Host paths and other PVs" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/persistent-storage/host-paths/">
        Host paths and other PVs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/persistent-storage/oci-fss-pv/" title="Use OCI File Storage (FSS) for persistent volumes" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/persistent-storage/oci-fss-pv/">
        Use OCI File Storage (FSS) for persistent volumes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/persistent-storage/volumes/" title="Provide access to a PersistentVolumeClaim" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/persistent-storage/volumes/">
        Provide access to a PersistentVolumeClaim
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/persistent-storage/configmaps/" title="Provide access to a ConfigMap" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/persistent-storage/configmaps/">
        Provide access to a ConfigMap
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/accessing-the-domain/" title="Access and monitor domains" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/">
          <b> </b>Access and monitor domains
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/weblogic-admin-console/" title="Use the Administration Console" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/weblogic-admin-console/">
        Use the Administration Console
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/remote-admin-console/" title="Use the Remote Console" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/remote-admin-console/">
        Use the Remote Console
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/wlst/" title="Use WLST" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/wlst/">
        Use WLST
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/port-forward/" title="Use port forwarding" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/port-forward/">
        Use port forwarding
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/accessing-the-domain/ingress/" title="Ingress" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/ingress/">
          Ingress
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/oci-lb/" title="Use an OCI load balancer" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/oci-lb/">
        Use an OCI load balancer
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/istio/istio/" title="Istio support" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/istio/istio/">
        Istio support
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/external-clients/" title="External WebLogic clients" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/external-clients/">
        External WebLogic clients
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/domain-events/" title="Domain events" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/domain-events/">
        Domain events
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/status-conditions/" title="Status conditions" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/status-conditions/">
        Status conditions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/logs/" title="Log files" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/logs/">
        Log files
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/accessing-the-domain/monitoring-exporter/" title="Monitoring exporter" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/accessing-the-domain/monitoring-exporter/">
        Monitoring exporter
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/domain-lifecycle/" title="Domain life cycle" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/">
          <b> </b>Domain life cycle
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/startup/" title="Startup and shutdown" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/startup/">
        Startup and shutdown
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/restarting/" title="Restarting" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/restarting/">
        Restarting
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/scaling/" title="Scaling" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/scaling/">
        Scaling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/introspection/" title="Domain introspection" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/introspection/">
        Domain introspection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/liveness-readiness-probe-customization/" title="Liveness and readiness probes customization" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/liveness-readiness-probe-customization/">
        Liveness and readiness probes customization
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/retry/" title="Domain failure retry processing" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/retry/">
        Domain failure retry processing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/domain-lifecycle/scripts/" title="Lifecycle scripts" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/domain-lifecycle/scripts/">
        Lifecycle scripts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/cicd/" title="CI/CD considerations" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/">
          CI/CD considerations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/layering/" title="Container image layering" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/layering/">
        Container image layering
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/why-layering-matters/" title="Why layering matters" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/why-layering-matters/">
        Why layering matters
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/choose-an-approach/" title="Choose an approach" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/choose-an-approach/">
        Choose an approach
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/mutate-the-domain-layer/" title="Mutate the domain layer" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/mutate-the-domain-layer/">
        Mutate the domain layer
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/how-to-copy-domains/" title="Copy domains" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/how-to-copy-domains/">
        Copy domains
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/cicd/tools/" title="Tools" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/cicd/tools/">
        Tools
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/managing-fmw-domains/" title="Manage FMW Infrastructure domains" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/managing-fmw-domains/">
          Manage FMW Infrastructure domains
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/managing-domains/aks/" title="Azure Kubernetes Service (AKS)" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/aks/">
          Azure Kubernetes Service (AKS)
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/managing-domains/debugging/" title="Domain debugging" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-domains/debugging/">
        <b> </b>Domain debugging
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/base-images/" title="WebLogic images" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/base-images/">
          <b> </b>WebLogic images
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/base-images/ocr-images/" title="OCR images" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/base-images/ocr-images/">
        OCR images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/base-images/custom-images/" title="Create custom images" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/base-images/custom-images/">
        Create custom images
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/base-images/patch-images/" title="Patch running domains" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/base-images/patch-images/">
        Patch running domains
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/base-images/access-images/" title="Access domain images" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/base-images/access-images/">
        Access domain images
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/samples/" title="Samples" class="dd-item
        parent
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/">
          <b> </b>Samples
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/samples/credentials/" title="Credentials" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/credentials/">
          Credentials
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/storage/" title="Storage" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/storage/">
          Storage
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/database/" title="Run a database" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/database/">
          Run a database
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/" title="Domains" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/">
          Domains
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/manually-create-domain/" title="Manually" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/manually-create-domain/">
          Manually
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/domain-home-on-pv/" title="Domain home on a PV" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/domain-home-on-pv/">
          Domain home on a PV
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/domain-home-in-image/" title="Domain home in image" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/domain-home-in-image/">
          Domain home in image
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/model-in-image/" title="Model in image" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/">
          Model in image
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/prerequisites/">
        Prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/initial/" title="Initial use case" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/initial/">
        Initial use case
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/update1/" title="Update 1" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/update1/">
        Update 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/update2/" title="Update 2" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/update2/">
        Update 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/update3/" title="Update 3" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/update3/">
        Update 3
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/update4/" title="Update 4" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/update4/">
        Update 4
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/domains/model-in-image/cleanup/" title="Cleanup" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/model-in-image/cleanup/">
        Cleanup
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/fmw-domain/" title="FMW Infrastructure domain on a PV" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/fmw-domain/">
          FMW Infrastructure domain on a PV
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/fmw-domain-home-in-image/" title="FMW Infrastructure domain home in image" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/fmw-domain-home-in-image/">
          FMW Infrastructure domain home in image
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/delete-domain/" title="Delete resources associated with the domain" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/delete-domain/">
          Delete resources associated with the domain
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/domains/lifecycle/" title="Domain lifecycle operations" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/lifecycle/">
          Domain lifecycle operations
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/rest/" title="REST APIs" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/rest/">
          REST APIs
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/ingress/" title="Ingress" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/ingress/">
          Ingress
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/elastic-stack/" title="Elastic Stack" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/elastic-stack/">
          Elastic Stack
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/samples/elastic-stack/operator/" title="Operator" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/elastic-stack/operator/">
          Operator
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/elastic-stack/weblogic-domain/" title="WebLogic domain" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/elastic-stack/weblogic-domain/">
          WebLogic domain
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/azure-kubernetes-service/" title="Azure Kubernetes Service" class="dd-item
        parent
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/">
          Azure Kubernetes Service
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/samples/azure-kubernetes-service/domain-on-pv/" title="Domain home on a PV" class="dd-item active">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/domain-on-pv/">
        Domain home on a PV
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/azure-kubernetes-service/model-in-image/" title="Model in Image" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/model-in-image/">
        Model in Image
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/samples/azure-kubernetes-service/troubleshooting/" title="Troubleshooting" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/troubleshooting/">
        Troubleshooting
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/samples/tanzu-kubernetes-service/" title="Tanzu Kubernetes Service" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/tanzu-kubernetes-service/">
          Tanzu Kubernetes Service
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/developerguide/" title="Developer Guide" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/">
          <b> </b>Developer Guide
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/developerguide/contributing/" title="Contribute to the operator" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/contributing/">
        Contribute to the operator
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/requirements/" title="Requirements" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/requirements/">
        Requirements
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/building/" title="Building" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/building/">
        Building
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/integration-tests/" title="Integration tests" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/integration-tests/">
        Integration tests
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/branching/" title="Branching" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/branching/">
        Branching
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/coding-standards/" title="Coding standards" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/coding-standards/">
        Coding standards
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/code-structure/" title="Code structure" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/code-structure/">
        Code structure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/asynchronous-call-model/" title="Asynchronous call model" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/asynchronous-call-model/">
        Asynchronous call model
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/domain-processing/" title="Domain processing" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/domain-processing/">
        Domain processing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/documentation/" title="Documentation" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/documentation/">
        Documentation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/developerguide/backwards-compatibility/" title="Backward compatibility" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/developerguide/backwards-compatibility/">
        Backward compatibility
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/reference/" title="Reference" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/reference/">
          <b> </b>Reference
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/domain-resource/" title="Domain resource" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/reference/domain-resource/">
        Domain resource
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/security/" title="Security" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/">
          <b> </b>Security
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/security/certificates/" title="Certificates" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/certificates/">
        Certificates
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security/domain-security/" title="Domain security" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/domain-security/">
          Domain security
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/security/domain-security/pod-and-container/" title="Pod and container security" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/domain-security/pod-and-container/">
        Pod and container security
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/domain-security/image-protection/" title="Container image protection" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/domain-security/image-protection/">
        Container image protection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/domain-security/weblogic-channels/" title="External network access security" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/domain-security/weblogic-channels/">
        External network access security
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/encryption/" title="Encryption" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/encryption/">
        Encryption
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/service-accounts/" title="Service accounts" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/service-accounts/">
        Service accounts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/rbac/" title="RBAC" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/rbac/">
        RBAC
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/secrets/" title="Secrets" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/secrets/">
        Secrets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/security/openshift/" title="OpenShift" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/security/openshift/">
        OpenShift
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/faq/" title="Frequently asked questions" class="dd-item
        
        
        
        ">
      <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/">
          Frequently asked questions
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/faq/newbie/" title="Answers for newcomers" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/newbie/">
        Answers for newcomers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/cannot-pull-image/" title="Cannot pull image" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/cannot-pull-image/">
        Cannot pull image
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/boot-identity-not-valid/" title="Boot identity not valid" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/boot-identity-not-valid/">
        Boot identity not valid
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/domain-secret-mismatch/" title="Domain secret mismatch" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/domain-secret-mismatch/">
        Domain secret mismatch
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/node-heating/" title="Node heating problem" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/node-heating/">
        Node heating problem
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/fan/" title="Disabling Fast Application Notifications" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/fan/">
        Disabling Fast Application Notifications
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/coherence-requirements/" title="Coherence requirements" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/coherence-requirements/">
        Coherence requirements
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/resource-settings/" title="Pod memory and CPU resources" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/resource-settings/">
        Pod memory and CPU resources
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/security-validation/" title="Handling security validations" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/security-validation/">
        Handling security validations
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/faq/node-selector/" title="Scheduling pods to particular nodes" class="dd-item ">
        <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/node-selector/">
        Scheduling pods to particular nodes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
      <li><a  class="padding" href="https://github.com/oracle/weblogic-kubernetes-operator/releases">Releases</a></li>
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-kubernetes-operator"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #operator</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='https://oracle.github.io/weblogic-kubernetes-operator/4.0/'></a> > <a href='https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/'>Samples</a> > <a href='https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/'>Azure Kubernetes Service</a> > Domain home on a PV
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#contents">Contents</a>
          <ul>
            <li><a href="#clone-weblogic-kubernetes-operator-repository">Clone WebLogic Kubernetes Operator repository</a></li>
            <li><a href="#sign-in-with-azure-cli">Sign in with Azure CLI</a></li>
          </ul>
        </li>
        <li><a href="#install-weblogic-kubernetes-operator-into-the-aks-cluster">Install WebLogic Kubernetes Operator into the AKS cluster</a></li>
        <li><a href="#create-weblogic-domain">Create WebLogic domain</a>
          <ul>
            <li><a href="#create-secrets">Create secrets</a></li>
            <li><a href="#create-weblogic-domain-1">Create WebLogic Domain</a></li>
          </ul>
        </li>
        <li><a href="#automation">Automation</a></li>
        <li><a href="#deploy-sample-application">Deploy sample application</a></li>
        <li><a href="#validate-nfs-volume">Validate NFS volume</a></li>
        <li><a href="#clean-up-resources">Clean up resources</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
        <li><a href="#useful-links">Useful links</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Domain home on a PV
            </h1>
          

        


<p>This sample demonstrates how to use the <a href="https://oracle.github.io/weblogic-kubernetes-operator">WebLogic Kubernetes Operator</a> (hereafter &ldquo;the operator&rdquo;) to set up a WebLogic Server (WLS) cluster on the Azure Kubernetes Service (AKS) using the model in persistence volume approach. After going through the steps, your WLS domain runs on an AKS cluster instance and you can manage your WLS domain by accessing the WebLogic Server Administration Console.</p>
<h4 id="contents">Contents</h4>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#create-the-aks-cluster">Create an AKS cluster</a></li>
<li><a href="#install-weblogic-kubernetes-operator-into-the-aks-cluster">Install WebLogic Kubernetes Operator</a></li>
<li><a href="#create-weblogic-domain">Create WebLogic domain</a></li>
<li><a href="#automation">Automation</a></li>
<li><a href="#deploy-sample-application">Deploy sample application</a></li>
<li><a href="#validate-nfs-volume">Validate NFS volume</a></li>
<li><a href="#clean-up-resources">Clean up resources</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#useful-links">Useful links</a></li>
</ul>

<h4 id="prerequisites">Prerequisites</h4>
<p>This sample assumes the following prerequisite environment.</p>
<ul>
<li>If you don&rsquo;t have an <a href="https://learn.microsoft.com/en-us/azure/guides/developer/azure-developer-guide#understanding-accounts-subscriptions-and-billing">Azure subscription</a>, create a <a href="https://azure.microsoft.com/free/?ref=microsoft.com&amp;utm_source=microsoft.com&amp;utm_medium=docs&amp;utm_campaign=visualstudio">free account</a> before you begin.
<ul>
<li>It&rsquo;s recommended that the Azure identity you use to sign in and complete this article has either the <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#owner">Owner</a> role in the current subscription or the <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor">Contributor</a> and <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#user-access-administrator">User Access Administrator</a> roles in the current subscription.</li>
<li>If your identity has very limited role assignments, ensure you have the following role assignments in the AKS resource group and AKS node resource group.
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor">Contributor</a> role and <a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#user-access-administrator">User Access Administrator</a> role in the resource group that runs AKS cluster. This requires asking a privileged user to assign the roles before creating resource in the resource group.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor">Contributor</a> role in the AKS node resource group whose name starts with &ldquo;MC_&rdquo;. This requires asking a privileged user to assign the role after the AKS instance is created.</li>
</ul>
</li>
</ul>
</li>
<li>Operating System: GNU/Linux, macOS or <a href="https://docs.microsoft.com/windows/wsl/install-win10">WSL2 for Windows 10</a>.</li>
<li><a href="https://git-scm.com/downloads">Git</a>; use <code>git --version</code> to test if <code>git</code> works.  This document was tested with version 2.25.1.</li>
<li><a href="https://docs.microsoft.com/cli/azure">Azure CLI</a>; use <code>az --version</code> to test if <code>az</code> works.  This document was tested with version 2.48.1.</li>
<li><a href="https://www.docker.com/products/docker-desktop">Docker for Desktop</a>.  This document was tested with <code>Docker version 20.10.7</code></li>
<li><a href="https://kubernetes-io-vnext-staging.netlify.com/docs/tasks/tools/install-kubectl/">kubectl</a>; use <code>kubectl version</code> to test if <code>kubectl</code> works.  This document was tested with version v1.21.2.</li>
<li><a href="https://helm.sh/docs/intro/install/">Helm</a>, version 3.1 and later; use <code>helm version</code> to check the <code>helm</code> version.  This document was tested with version v3.6.2.</li>
<li>A Java JDK, Version 8 or 11. Azure recommends <a href="https://docs.microsoft.com/java/openjdk/download">Microsoft Build of OpenJDK</a>. Ensure that your <code>JAVA_HOME</code> environment variable is set correctly in the shells in which you run the commands.</li>
</ul>



<h5 id="oracle-container-registry">Oracle Container Registry</h5>
<p>You will need an Oracle account. The following steps will direct you to accept the license agreement for WebLogic Server.  Make note of your Oracle Account password and email.  This sample pertains to 12.2.1.4, but other versions may work as well.</p>
<ul>
<li>In a web browser, navigate to <a href="https://container-registry.oracle.com">https://container-registry.oracle.com</a> and log in using the Oracle Single Sign-On authentication service. If you do not already have SSO credentials, at the top of the page, click the <strong>Sign In</strong> link to create them.</li>
<li>The Oracle Container Registry provides a WebLogic 12.2.1.4 General Availability (GA) installation image that is used in this sample.</li>
<li><strong>NOTE</strong>: General Availability (GA) images are suitable for demonstration and development purposes <em>only</em> where the environments are not available from the public Internet; they are <strong>not
acceptable for production use</strong>. In production, you should always use CPU (patched) images
from the OCR
or create your images using the <a href="https://oracle.github.io/weblogic-image-tool/userguide/tools/create-image/">WebLogic Image Tool</a>
(WIT) with the <code>--recommendedPatches</code> option. For more guidance,
see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/middleware/standalone/weblogic-server/14.1.1.0&amp;id=LOCKD-GUID-2DA84185-46BA-4D7A-80D2-9D577A4E8DE2">Apply the Latest Patches and Updates</a>
in <em>Securing a Production Environment for Oracle WebLogic Server</em>.</li>
<li>Ensure that Docker is running.  Find and then pull the WebLogic 12.2.1.4 installation image:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker pull container-registry.oracle.com/middleware/weblogic:12.2.1.4
</span></span></code></pre></div></li>
</ul>
<p>If you have problems accessing the Oracle Container Registry, you can build your own images from the <a href="https://github.com/oracle/docker-images/tree/main/OracleWebLogic/dockerfiles">Oracle GitHub repository</a>.</p>


<h5 id="clone-weblogic-kubernetes-operator-repository">Clone WebLogic Kubernetes Operator repository</h5>
<p>Clone the <a href="https://github.com/oracle/weblogic-kubernetes-operator">WebLogic Kubernetes Operator repository</a> to your machine. You will use several scripts in this repository to create a WebLogic domain. This sample was tested with v3.4.2, but should work with the latest release.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ git clone --branch v4.0.9
 https://github.com/oracle/weblogic-kubernetes-operator.git
</span></span></code></pre></div><h5 id="sign-in-with-azure-cli">Sign in with Azure CLI</h5>
<p>The steps in this section show you how to sign in to the Azure CLI.</p>
<ol>
<li>
<p>Open a Bash shell.</p>
</li>
<li>
<p>Sign out and delete some authentication files to remove any lingering credentials.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az logout
</span></span><span style="display:flex;"><span>$ rm ~/.azure/accessTokens.json
</span></span><span style="display:flex;"><span>$ rm ~/.azure/azureProfile.json
</span></span></code></pre></div></li>
<li>
<p>Sign in to your Azure CLI.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az login
</span></span></code></pre></div></li>
<li>
<p>Set the subscription ID. Be sure to replace the placeholder with the appropriate value.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export SUBSCRIPTION_ID<span style="color:#f92672">=</span>&lt;your-subscription-id&gt;
</span></span><span style="display:flex;"><span>$ az account set -s $SUBSCRIPTION_ID
</span></span></code></pre></div></li>
</ol>

<div class="notices info" ><p>The following sections of the sample instructions will guide you, step-by-step, through the process of setting up a WebLogic cluster on AKS - remaining as close as possible to a native Kubernetes experience. This lets you understand and customize each step. If you wish to have a more automated experience that abstracts some lower level details, you can skip to the <a href="#automation">Automation</a> section.</p>
</div>


<h4 id="create-the-aks-cluster">Create the AKS cluster</h4>
<p>This sample requires that you disable the AKS addon <code>http_application_routing</code> by default.  If you want to enable  <code>http_application_routing</code>, then follow <a href="https://docs.microsoft.com/azure/aks/http-application-routing">HTTP application routing</a>.</p>
<p>Run the following commands to create the AKS cluster instance.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Change these parameters as needed for your own environment</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Specify a prefix to name resources, only allow lowercase letters and numbers, between 1 and 7 characters</span>
</span></span><span style="display:flex;"><span>$ export NAME_PREFIX<span style="color:#f92672">=</span>wls
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Used to generate resource names.</span>
</span></span><span style="display:flex;"><span>$ export TIMESTAMP<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>date +%s<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>$ export AKS_CLUSTER_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span><span style="color:#e6db74">aks</span><span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>$ export AKS_PERS_RESOURCE_GROUP<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span><span style="color:#e6db74">resourcegroup</span><span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>$ export AKS_PERS_LOCATION<span style="color:#f92672">=</span>eastus
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ az group create --name $AKS_PERS_RESOURCE_GROUP --location $AKS_PERS_LOCATION
</span></span><span style="display:flex;"><span>$ az aks create <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --resource-group $AKS_PERS_RESOURCE_GROUP <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --name $AKS_CLUSTER_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --node-count <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --generate-ssh-keys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --nodepool-name nodepool1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --node-vm-size Standard_DS2_v2 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --location $AKS_PERS_LOCATION <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --enable-managed-identity
</span></span></code></pre></div><p>Successful output will be a JSON object with the entry <code>&quot;type&quot;: &quot;Microsoft.ContainerService/ManagedClusters&quot;</code>.</p>
<p>After the deployment finishes, run the following command to connect to the AKS cluster. This command updates your local <code>~/.kube/config</code> so that subsequent <code>kubectl</code> commands interact with the named AKS cluster.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az aks get-credentials --resource-group $AKS_PERS_RESOURCE_GROUP --name $AKS_CLUSTER_NAME
</span></span></code></pre></div><p>Successful output will look similar to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Merged <span style="color:#e6db74">&#34;wlsaks1596087429&#34;</span> as current context in /home/username/.kube/config
</span></span></code></pre></div><p>After your Kubernetes cluster is up and running, run the following commands to make sure <code>kubectl</code> can access the Kubernetes cluster:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get nodes -o wide
</span></span><span style="display:flex;"><span>NAME                                  STATUS   ROLES   AGE     VERSION    INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME
</span></span><span style="display:flex;"><span>aks-pool1haiche-33688868-vmss000000   Ready    agent   4m25s   v1.17.13   10.240.0.4    &lt;none&gt;        Ubuntu 16.04.7 LTS   4.15.0-1098-azure   docker://19.3.12
</span></span><span style="display:flex;"><span>aks-pool1haiche-33688868-vmss000001   Ready    agent   4m12s   v1.17.13   10.240.0.5    &lt;none&gt;        Ubuntu 16.04.7 LTS   4.15.0-1098-azure   docker://19.3.12
</span></span></code></pre></div>

<p><strong>Note</strong>: If you run into VM size failure, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/troubleshooting/#virtual-machine-size-is-not-supported">Troubleshooting - Virtual Machine size is not supported</a>.</p>

<h4 id="create-storage">Create storage</h4>
<p>Our usage pattern for the operator involves creating Kubernetes &ldquo;persistent volumes&rdquo; to allow the WebLogic Server to persist its configuration and data separately from the Kubernetes Pods that run WebLogic Server workloads.</p>
<p>You will create an external data volume to access and persist data. There are several options for data sharing as described in <a href="https://docs.microsoft.com/azure/aks/concepts-storage">Storage options for applications in Azure Kubernetes Service (AKS)</a>.</p>
<p>You will dynamically create and use a persistent volume with Azure Files NFS share.  For details about this full featured cloud storage solution, see the <a href="https://docs.microsoft.com/azure/aks/azure-files-dynamic-pv">Azure Files Documentation</a>.</p>
<h5 id="create-an-azure-storage-account-and-nfs-share">Create an Azure Storage account and NFS share</h5>
<ol>
<li>
<p>Create an Azure Storage Account.</p>
<p>Create a storage account using the Azure CLI. Make sure the following values are specified:</p>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>$AKS_PERS_STORAGE_ACCOUNT_NAME</code></td>
<td>The storage account name can contain only lowercase letters and numbers, and must be between 3 and 24 characters in length.</td>
</tr>
<tr>
<td><code>sku</code></td>
<td><code>Premium_LRS</code></td>
<td>Only <code>Premium_LRS</code> and <code>Premium_ZRS</code> work for NFS share, see the <a href="https://docs.microsoft.com/azure/storage/files/storage-files-how-to-create-nfs-shares?tabs=azure-portal#applies-to">Azure Files NFS Share Documentation</a>.</td>
</tr>
<tr>
<td><code>https-only</code></td>
<td><code>false</code></td>
<td>You can&rsquo;t mount an NFS file share unless you disable secure transfer.</td>
</tr>
<tr>
<td><code>default-action</code></td>
<td><code>Deny</code></td>
<td>For security, we suggest that you deny access by default and choose to allow access from the AKS cluster network.</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Change the value as needed for your own environment</span>
</span></span><span style="display:flex;"><span>$ export AKS_PERS_STORAGE_ACCOUNT_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span><span style="color:#e6db74">storage</span><span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ az storage account create <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --resource-group $AKS_PERS_RESOURCE_GROUP <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --name $AKS_PERS_STORAGE_ACCOUNT_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --location $AKS_PERS_LOCATION <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --sku Premium_LRS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --kind FileStorage <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --https-only false <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --default-action Deny
</span></span></code></pre></div><p>Successful output will be a JSON object with the entry <code>&quot;type&quot;: &quot;Microsoft.Storage/storageAccounts&quot;</code>.</p>
</li>
<li>
<p>Create an NFS share.</p>
<p>To create the file share, you must use <code>NoRootSquash</code> to allow the operator to change the ownership of the directory in the NFS share.</p>
<p>Otherwise, you will get an error like <code>chown: changing ownership of '/shared': Operation not permitted</code>.</p>
<p>The following command creates an NFS share with 100GiB:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Change value as needed for your own environment</span>
</span></span><span style="display:flex;"><span>$ export AKS_PERS_SHARE_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span><span style="color:#e6db74">-weblogic-</span><span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create NFS file share</span>
</span></span><span style="display:flex;"><span>$ az storage share-rm create <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --resource-group $AKS_PERS_RESOURCE_GROUP <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --storage-account $AKS_PERS_STORAGE_ACCOUNT_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --name <span style="color:#e6db74">${</span>AKS_PERS_SHARE_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --enabled-protocol NFS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --root-squash NoRootSquash <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --quota <span style="color:#ae81ff">100</span>
</span></span></code></pre></div><p>The command provisions an NFS file share with NFS 4.1 or above.</p>
</li>
<li>
<p>Assign the AKS cluster <strong>Contributor</strong> role to access the storage account.</p>
<p>You must configure role assignment allowing access from AKS cluster to the storage account.</p>
<p>Get <code>objectId</code> of the AKS cluster with the following command and save it with variable <code>AKS_OBJECT_ID</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ AKS_OBJECT_ID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az aks show --name <span style="color:#e6db74">${</span>AKS_CLUSTER_NAME<span style="color:#e6db74">}</span> --resource-group <span style="color:#e6db74">${</span>AKS_PERS_RESOURCE_GROUP<span style="color:#e6db74">}</span> --query <span style="color:#e6db74">&#34;identity.principalId&#34;</span> -o tsv<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><p>Get Id of the storage account with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ STORAGE_ACCOUNT_ID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az storage account show --name <span style="color:#e6db74">${</span>AKS_PERS_STORAGE_ACCOUNT_NAME<span style="color:#e6db74">}</span> --resource-group <span style="color:#e6db74">${</span>AKS_PERS_RESOURCE_GROUP<span style="color:#e6db74">}</span> --query <span style="color:#e6db74">&#34;id&#34;</span> -o tsv<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><p>Now, you are able to create a role assignment to grant the AKS cluster <strong>Contributor</strong> in the scope of the storage account. Then, the AKS cluster is able to access the file share.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az role assignment create <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --assignee-object-id <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>AKS_OBJECT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --assignee-principal-type <span style="color:#e6db74">&#34;ServicePrincipal&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --role <span style="color:#e6db74">&#34;Contributor&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --scope <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>STORAGE_ACCOUNT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p>Successful output will be a JSON object with string like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;condition&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;conditionVersion&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;createdBy&#34;</span>: <span style="color:#e6db74">&#34;d6fe7d09-3330-45b6-ae32-4dd5e3310835&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;createdOn&#34;</span>: <span style="color:#e6db74">&#34;2023-05-11T04:13:04.922943+00:00&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;delegatedManagedIdentityResourceId&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/wlsresourcegroup1683777168/providers/Microsoft.Storage/storageAccounts/wlsstorage1683777168/providers/Microsoft.Authorization/roleAssignments/93dae12d-21c8-4844-99cd-e8b088356af6&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;93dae12d-21c8-4844-99cd-e8b088356af6&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;principalId&#34;</span>: <span style="color:#e6db74">&#34;95202c6f-2073-403c-b9a7-7d2f1cbb4541&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;principalName&#34;</span>: <span style="color:#e6db74">&#34;3640cbf2-4db7-43b8-bcf6-1e51d3e90478&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;principalType&#34;</span>: <span style="color:#e6db74">&#34;ServicePrincipal&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;resourceGroup&#34;</span>: <span style="color:#e6db74">&#34;wlsresourcegroup1683777168&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;roleDefinitionId&#34;</span>: <span style="color:#e6db74">&#34;/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;roleDefinitionName&#34;</span>: <span style="color:#e6db74">&#34;Contributor&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/wlsresourcegroup1683777168/providers/Microsoft.Storage/storageAccounts/wlsstorage1683777168&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;Microsoft.Authorization/roleAssignments&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;updatedBy&#34;</span>: <span style="color:#e6db74">&#34;d6fe7d09-3330-45b6-ae32-4dd5e3310835&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;updatedOn&#34;</span>: <span style="color:#e6db74">&#34;2023-05-11T04:13:04.922943+00:00&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>Configure network security.</p>
<p>You must configure the network security allowing access from AKS cluster to the file share.</p>
<p>First, you must get the virtual network name and the subnet name of the AKS cluster.</p>
<p>Run the following commands to get network information:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># get the resource group name of the AKS managed resources</span>
</span></span><span style="display:flex;"><span>$ aksMCRGName<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az aks show --name $AKS_CLUSTER_NAME --resource-group $AKS_PERS_RESOURCE_GROUP -o tsv --query <span style="color:#e6db74">&#34;nodeResourceGroup&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>aksMCRGName<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get network name of AKS cluster</span>
</span></span><span style="display:flex;"><span>$ aksNetworkName<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az graph query -q <span style="color:#e6db74">&#34;Resources \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    | where type =~ &#39;Microsoft.Network/virtualNetworks&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    | where resourceGroup  =~ &#39;</span><span style="color:#e6db74">${</span>aksMCRGName<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    | project name = name&#34;</span> --query <span style="color:#e6db74">&#34;data[0].name&#34;</span>  -o tsv<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>aksNetworkName<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get subnet name of AKS agent pool</span>
</span></span><span style="display:flex;"><span>$ aksSubnetName<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az network vnet subnet list --resource-group <span style="color:#e6db74">${</span>aksMCRGName<span style="color:#e6db74">}</span> --vnet-name <span style="color:#e6db74">${</span>aksNetworkName<span style="color:#e6db74">}</span> -o tsv --query <span style="color:#e6db74">&#34;[*].name&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>aksSubnetName<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get subnet id of the AKS agent pool</span>
</span></span><span style="display:flex;"><span>$ aksSubnetId<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>az network vnet subnet list --resource-group <span style="color:#e6db74">${</span>aksMCRGName<span style="color:#e6db74">}</span> --vnet-name <span style="color:#e6db74">${</span>aksNetworkName<span style="color:#e6db74">}</span> -o tsv --query <span style="color:#e6db74">&#34;[*].id&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>aksSubnetId<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>You must enable the service endpoint <code>Microsoft.Storage</code> for the subnet using the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az network vnet subnet update <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --resource-group $aksMCRGName <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --name <span style="color:#e6db74">${</span>aksSubnetName<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --vnet-name <span style="color:#e6db74">${</span>aksNetworkName<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --service-endpoints Microsoft.Storage
</span></span></code></pre></div><p>It takes several minutes to enable the service endpoint; successful output will be a JSON object with string like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&#34;serviceEndpoints&#34;: [
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;locations&#34;: [
</span></span><span style="display:flex;"><span>    &#34;eastus&#34;,
</span></span><span style="display:flex;"><span>    &#34;westus&#34;
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  &#34;provisioningState&#34;: &#34;Succeeded&#34;,
</span></span><span style="display:flex;"><span>  &#34;service&#34;: &#34;Microsoft.Storage&#34;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now you must create a network rule to allow access from AKS cluster.
The following command enables access from AKS subnet to the storage account:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az storage account network-rule add <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --resource-group $AKS_PERS_RESOURCE_GROUP <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --account-name $AKS_PERS_STORAGE_ACCOUNT_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --subnet <span style="color:#e6db74">${</span>aksSubnetId<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>Successful output will be a JSON object with virtual network rule like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&#34;virtualNetworkRules&#34;: [
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    &#34;action&#34;: &#34;Allow&#34;,
</span></span><span style="display:flex;"><span>    &#34;state&#34;: &#34;Succeeded&#34;,
</span></span><span style="display:flex;"><span>    &#34;virtualNetworkResourceId&#34;: &#34;${aksSubnetId}&#34;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div></li>
</ol>
<h5 id="create-storage-class-and-pvc">Create Storage Class and PVC</h5>
<p>This sample will dynamically create and use a persistent volume with Azure Files in AKS.  These features are passed to Kubernetes using YAML files.</p>
<p>The script <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/create-domain-on-aks.sh</code> generates the required configuration files automatically, given an input file containing the parameters.</p>
<p>A parameters file is provided at <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/create-domain-on-aks-inputs.yaml</code>.  Copy and customize this file for your needs.</p>
<p>To generate YAML files to create Storage Class and PVC in the AKS cluster, the following values must be substituted in your copy of the input file.</p>
<table>
<thead>
<tr>
<th>Name in YAML file</th>
<th>Example value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>namePrefix</code></td>
<td><code>wls</code></td>
<td>Alphanumeric value used as a disambiguation prefix for several Kubernetes resources. Make sure the value matches the value of <code>${NAME_PREFIX}</code> to keep names in step-by-step commands the same with those in configuration files.</td>
</tr>
</tbody>
</table>
<p>Use the following command to generate configuration files, assuming the output directory is <code>~/azure</code>.  The script will overwrite any files generated by a previous invocation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#cd kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service</span>
</span></span><span style="display:flex;"><span>$ cp create-domain-on-aks-inputs.yaml my-create-domain-on-aks-inputs.yaml
</span></span><span style="display:flex;"><span>$ ./create-domain-on-aks.sh -i my-create-domain-on-aks-inputs.yaml -o ~/azure -u <span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>After running the command, all needed configuration files are generated and output to <code>~/azure/weblogic-on-aks</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>The following files were generated:
</span></span><span style="display:flex;"><span>  /home/username/azure/weblogic-on-aks/azure-csi-nfs.yaml
</span></span><span style="display:flex;"><span>  /home/username/azure/weblogic-on-aks/pvc.yaml
</span></span><span style="display:flex;"><span>  /home/username/azure/weblogic-on-aks/admin-lb.yaml
</span></span><span style="display:flex;"><span>  /home/username/azure/weblogic-on-aks/cluster-lb.yaml
</span></span><span style="display:flex;"><span>  /home/username/azure/weblogic-on-aks/domain1.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Completed
</span></span></code></pre></div><p><strong>Note:</strong> Beyond the required and default configurations generated by the command, you can modify the generated YAML files to further customize your deployment. For further information about customizing your deployment, consult the operator documentation, <a href="https://docs.microsoft.com/azure/aks/">AKS documentation</a>, and Kubernetes references.</p>
<h5 id="apply-generated-configuration-files">Apply generated configuration files</h5>
<p>To define how an Azure file NFS share is created, we have provided a configuration file <code>azure-csi-nfs.yaml</code>. You can find it in your output directory.</p>
<p>The following command displays the YAML content of your current settings. This should be the same with content in <code>azure-csi-nfs.yaml</code>. The Storage Class name is <code>azurefile-csi-nfs</code>.</p>
<p>This sample uses Azure Files Container Storage Interface (CSI) drivers to manage the NFS file share, provisioner is <code>file.csi.azure.com</code>, see the <a href="https://docs.microsoft.com/azure/aks/azure-files-csi">Azure Files CSI drivers documentation</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: storage.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: StorageClass
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: azurefile-csi-nfs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">provisioner: file.csi.azure.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">allowVolumeExpansion: true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">parameters:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  protocol: nfs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">mountOptions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - nconnect=4
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><p>We have provided another configuration file <code>pvc.yaml</code> for the <code>PersistentVolumeClaim</code>.  The <code>pvc.yaml</code> file has exactly the same Storage Class name as created previously. This is required.
The following command displays the YAML content of <code>pvc.yaml</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: PersistentVolumeClaim
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: wls-azurefile-${TIMESTAMP}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  accessModes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - ReadWriteMany
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  storageClassName: azurefile-csi-nfs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resources:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    requests:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      storage: 100Gi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><p>Use the <code>kubectl</code> command to create the Storage Class and persistent volume claim to the <code>default</code> namespace.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f ~/azure/weblogic-on-aks/azure-csi-nfs.yaml
</span></span></code></pre></div><pre tabindex="0"><code>persistentvolume/wls-azurefile created
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f ~/azure/weblogic-on-aks/pvc.yaml
</span></span></code></pre></div><pre tabindex="0"><code>persistentvolumeclaim/wls-azurefile created
</code></pre><p>Use the following command to verify:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pvc
</span></span></code></pre></div><p>Example output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pvc
</span></span><span style="display:flex;"><span>NAME                       STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS        AGE
</span></span><span style="display:flex;"><span>wls-azurefile-1612795811   Bound    pvc-b9c0dfbb-0cee-4362-809e-1621894c5794   100Gi      RWX            azurefile-csi-nfs   17s
</span></span></code></pre></div><p><strong>Note</strong>: Carefully inspect the output and verify it matches the above. <code>ACCESS MODES</code>, <code>CLAIM</code>, and <code>STORAGECLASS</code> are vital.</p>


<h4 id="install-weblogic-kubernetes-operator-into-the-aks-cluster">Install WebLogic Kubernetes Operator into the AKS cluster</h4>
<p>The WebLogic Kubernetes Operator is an adapter to integrate WebLogic Server and Kubernetes, allowing Kubernetes to serve as a container infrastructure hosting WLS instances.  The operator runs as a Kubernetes Pod and stands ready to perform actions related to running WLS on Kubernetes.</p>
<p>Kubernetes Operators use <a href="https://helm.sh/">Helm</a> to manage Kubernetes applications. The operators Helm chart is located in the <code>kubernetes/charts/weblogic-operator</code> directory. Please install the operator by running the corresponding command.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm repo add weblogic-operator https://oracle.github.io/weblogic-kubernetes-operator/charts --force-update
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install weblogic-operator weblogic-operator/weblogic-operator
</span></span></code></pre></div><p>The output will show something similar to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install weblogic-operator weblogic-operator/weblogic-operator
</span></span><span style="display:flex;"><span>NAME: weblogic-operator
</span></span><span style="display:flex;"><span>LAST DEPLOYED: Tue Jan <span style="color:#ae81ff">18</span> 17:07:56 <span style="color:#ae81ff">2022</span>
</span></span><span style="display:flex;"><span>NAMESPACE: default
</span></span><span style="display:flex;"><span>STATUS: deployed
</span></span><span style="display:flex;"><span>REVISION: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>TEST SUITE: None
</span></span></code></pre></div><p>Verify the operator with the following command; the <code>STATUS</code> must be <code>Running</code>.  The <code>READY</code> must be <code>1/1</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pods -w
</span></span></code></pre></div><pre tabindex="0"><code>NAME                                         READY   STATUS    RESTARTS   AGE
weblogic-operator-69794f8df7-bmvj9           1/1     Running   0          86s
weblogic-operator-webhook-868db5875b-55v7r   1/1     Running   0          86s
</code></pre>
<div class="notices tip" ><p>You will have to press Ctrl-C to exit this command due to the <code>-w</code> flag.</p>
</div>

<h4 id="create-weblogic-domain">Create WebLogic domain</h4>
<ul>
<li><a href="#create-secrets">Create secrets</a></li>
<li><a href="#create-weblogic-domain-1">Create WebLogic Domain</a></li>
</ul>
<p>Now that you have created the AKS cluster, installed the operator, and verified that the operator is ready to go, you can have the operator create a WLS domain.</p>
<h5 id="create-secrets">Create secrets</h5>
<p>You will use the <code>kubernetes/samples/scripts/create-weblogic-domain-credentials/create-weblogic-credentials.sh</code> script to create the domain WebLogic administrator credentials as a Kubernetes secret. Please run:</p>
<pre tabindex="0"><code># cd kubernetes/samples/scripts/create-weblogic-domain-credentials
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./create-weblogic-credentials.sh -u &lt;WebLogic admin username&gt; -p &lt;WebLogic admin password&gt; -d domain1
</span></span></code></pre></div><pre tabindex="0"><code>secret/domain1-weblogic-credentials created
secret/domain1-weblogic-credentials labeled
The secret domain1-weblogic-credentials has been successfully created in the default namespace.
</code></pre><p>Notes:</p>
<ul>
<li>Replace <code>&lt;WebLogic admin username&gt;</code> and <code>&lt;WebLogic admin password&gt;</code> with a WebLogic administrator username and password of your choice.</li>
<li>The password should be at least eight characters long and include at least one digit.</li>
<li>Remember what you specified. These credentials may be needed again later.</li>
</ul>
<p>You will use the <code>kubernetes/samples/scripts/create-kubernetes-secrets/create-docker-credentials-secret.sh</code> script to create the Docker credentials as a Kubernetes secret. Please run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Please change imagePullSecretNameSuffix if you change pre-defined value &#34;regcred&#34; before generating the configuration files.</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ export SECRET_NAME_DOCKER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span><span style="color:#e6db74">regcred&#34;</span>
</span></span></code></pre></div><pre tabindex="0"><code># cd kubernetes/samples/scripts/create-kubernetes-secrets
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./create-docker-credentials-secret.sh -s <span style="color:#e6db74">${</span>SECRET_NAME_DOCKER<span style="color:#e6db74">}</span> -e oracleSsoEmail@bar.com -p oracleSsoPassword -u oracleSsoEmail@bar.com
</span></span></code></pre></div><pre tabindex="0"><code>secret/wlsregcred created
The secret wlsregcred has been successfully created in the default namespace.
</code></pre><p>Verify secrets with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get secret
</span></span></code></pre></div><pre tabindex="0"><code>NAME                                      TYPE                             DATA   AGE
domain1-weblogic-credentials              Opaque                           2      2m32s
sh.helm.release.v1.weblogic-operator.v1   helm.sh/release.v1               1      5m32s
weblogic-operator-secrets                 Opaque                           1      5m31s
weblogic-webhook-secrets                  Opaque                           2      5m31s
wlsregcred                                kubernetes.io/dockerconfigjson   1      38s
</code></pre><p><strong>Note</strong>: If the <code>NAME</code> column in your output is missing any of the values shown above, please reexamine your execution of the preceding steps in this sample to ensure that you correctly followed all of them.</p>
<h5 id="create-weblogic-domain-1">Create WebLogic Domain</h5>
<p>You will use the <code>kubernetes/samples/scripts/create-weblogic-domain/domain-home-on-pv/create-domain.sh</code> script to create the WLS domain in the persistent volume you created previously.</p>

<div class="notices note" ><p>The <code>create-domain.sh</code> script and its inputs file are for demonstration purposes <em>only</em>; its contents and the domain resource file that it generates for you might change without notice. In production, we strongly recommend that you use the WebLogic Image Tool and WebLogic Deploy Tooling (when applicable), and directly work with domain resource files instead.</p>
</div>

<p>You need to set up the domain configuration for the WebLogic domain.</p>
<ol>
<li>
<p>Check if resources are ready.</p>
<p>If you used the automation script to create the AKS cluster, skip this step and go to step 2.</p>
<p>If you created Azure resources, step-by-step, according to the previous steps, then validate that all the resources above were created by using the script <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/validate.sh</code>.</p>
<p>Use the following commands to check if the resources are ready:</p>
<pre tabindex="0"><code># cd kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./validate.sh -g <span style="color:#e6db74">${</span>AKS_PERS_RESOURCE_GROUP<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --aks-name <span style="color:#e6db74">${</span>AKS_CLUSTER_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --file-share <span style="color:#e6db74">${</span>AKS_PERS_SHARE_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --storage-account <span style="color:#e6db74">${</span>AKS_PERS_STORAGE_ACCOUNT_NAME<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --domain-uid domain1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --pvc-name <span style="color:#e6db74">${</span>NAME_PREFIX<span style="color:#e6db74">}</span>-azurefile-<span style="color:#e6db74">${</span>TIMESTAMP<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> --secret-docker <span style="color:#e6db74">${</span>SECRET_NAME_DOCKER<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>You will see output with <code>PASS</code> if all the resources are ready. The following is an example of output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>PASS
</span></span><span style="display:flex;"><span>You can create your domain with the following resources ready:
</span></span><span style="display:flex;"><span>  Azure resource group: wlsresourcegroup1683786842
</span></span><span style="display:flex;"><span>  Azure Kubernetes Service instance: wlsaks1683786842
</span></span><span style="display:flex;"><span>  Azure storage account: wlsstorage1683786842
</span></span><span style="display:flex;"><span>  Azure file share: wls-weblogic-1683786842
</span></span><span style="display:flex;"><span>  Kubernetes secret for Container Registry Account: wlsregcred
</span></span><span style="display:flex;"><span>  Kubernetes secret for WebLogic domain: domain1-weblogic-credentials
</span></span><span style="display:flex;"><span>  Persistent Volume Claim: wls-azurefile-1683786842
</span></span></code></pre></div></li>
<li>
<p>Enable the operator to monitor the namespace</p>
<p>For more details of namespace management, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/managing-operators/namespace-management/">Namespace management</a>.</p>
<p>The domain will be created in <code>default</code> namespace. Run the following command to enable the operator to monitor <code>default</code> namespace.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl label namespace default weblogic-operator<span style="color:#f92672">=</span>enabled
</span></span></code></pre></div></li>
<li>
<p>Now let&rsquo;s ask the operator to create a WebLogic Server domain within the AKS cluster.</p>
<p>For complete details on domain creation, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/domain-home-on-pv/#use-the-script-to-create-a-domain">Domain home on a PV - Use the script to create a domain</a>.  If you do not want the complete details and just want to continue with the domain creation for AKS, invoke the <code>create-domain.sh</code> script as shown next.</p>
<pre tabindex="0"><code># cd kubernetes/samples/scripts/create-weblogic-domain/domain-home-on-pv
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./create-domain.sh -i ~/azure/weblogic-on-aks/domain1.yaml -o ~/azure -e -v
</span></span></code></pre></div><p>You may observe error-related output during the creation of the domain.  This is due to timing issues during domain creation.  The script accounts for this with a series of retries.  The error output looks similar to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Waiting for the job to complete...
</span></span><span style="display:flex;"><span>Error from server (BadRequest): container &#34;create-weblogic-sample-domain-job&#34; in pod &#34;domain1-create-weblogic-sample-domain-job-4l767&#34; is waiting to start: PodInitializing
</span></span><span style="display:flex;"><span>status on iteration 1 of 20
</span></span><span style="display:flex;"><span>pod domain1-create-weblogic-sample-domain-job-4l767 status is Init:0/1
</span></span><span style="display:flex;"><span>status on iteration 2 of 20
</span></span><span style="display:flex;"><span>pod domain1-create-weblogic-sample-domain-job-4l767 status is Running
</span></span></code></pre></div><p>If you see error messages that include the status <code>ImagePullBackOff</code> along with output similar to the following, it is likely your credentials for the Oracle Container Registry have not been successfully conveyed to the AKS cluster.</p>
<pre tabindex="0"><code>Failed to pull image &#34;container-registry.oracle.com/middleware/weblogic:12.2.1.4&#34;: rpc error: code = Unknown desc = Error response from daemon: Get https://container-registry-phx.oracle.com/v2/middleware/weblogic/manifests/12.2.1.4: unauthorized: authentication required
</code></pre><p>Ensure that the arguments you passed to the script <code>create-docker-credentials-secret.sh</code> are correct with respect to your Oracle SSO credentials.</p>
<p>The following example output shows the WebLogic domain was created successfully.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to view the example output.
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./create-domain.sh -i ~/azure/weblogic-on-aks/my-create-domain-inputs.yaml -o ~/azure -e -v
</span></span></code></pre></div><pre tabindex="0"><code>Input parameters being used
export version=&#34;create-weblogic-sample-domain-inputs-v1&#34;
export adminPort=&#34;7001&#34;
export adminServerName=&#34;admin-server&#34;
export domainUID=&#34;domain1&#34;
export domainHome=&#34;/shared/domains/domain1&#34;
export serverStartPolicy=&#34;IfNeeded&#34;
export clusterName=&#34;cluster-1&#34;
export configuredManagedServerCount=&#34;5&#34;
export initialManagedServerReplicas=&#34;2&#34;
export managedServerNameBase=&#34;managed-server&#34;
export managedServerPort=&#34;8001&#34;
export image=&#34;container-registry.oracle.com/middleware/weblogic:12.2.1.4&#34;
export imagePullPolicy=&#34;IfNotPresent&#34;
export imagePullSecretName=&#34;wlsregcred&#34;
export productionModeEnabled=&#34;true&#34;
export weblogicCredentialsSecretName=&#34;domain1-weblogic-credentials&#34;
export includeServerOutInPodLog=&#34;true&#34;
export logHome=&#34;/shared/logs/domain1&#34;
export httpAccessLogInLogHome=&#34;true&#34;
export t3ChannelPort=&#34;30012&#34;
export exposeAdminT3Channel=&#34;false&#34;
export adminNodePort=&#34;30701&#34;
export exposeAdminNodePort=&#34;true&#34;
export namespace=&#34;default&#34;
javaOptions=-Dweblogic.StdoutDebugEnabled=false -XX:InitialRAMPercentage=25.0 -XX:MaxRAMPercentage=50.0
export persistentVolumeClaimName=&#34;wls-azurefile-1683777168&#34;
export domainPVMountPath=&#34;/shared&#34;
export createDomainScriptsMountPath=&#34;/u01/weblogic&#34;
export createDomainScriptName=&#34;create-domain-job.sh&#34;
export createDomainFilesDir=&#34;wlst&#34;
export serverPodMemoryRequest=&#34;1.5Gi&#34;
export serverPodCpuRequest=&#34;250m&#34;

validateWlsDomainName called with domain1
createFiles - valuesInputFile is /home/username/azure/weblogic-on-aks/domain1.yaml
createDomainScriptName is create-domain-job.sh
Generating /home/username/azure/weblogic-domains/domain1/create-domain-job.yaml
Generating /home/username/azure/weblogic-domains/domain1/delete-domain-job.yaml
Generating /home/username/azure/weblogic-domains/domain1/domain.yaml
Checking to see if the secret domain1-weblogic-credentials exists in namespace default
Checking if the persistent volume claim wls-azurefile-1683777168 in NameSpace default exists
The persistent volume claim wls-azurefile-1683777168 already exists in NameSpace default
configmap/domain1-create-weblogic-sample-domain-job-cm created
Checking the configmap domain1-create-weblogic-sample-domain-job-cm was created
configmap/domain1-create-weblogic-sample-domain-job-cm labeled
Checking if object type job with name domain1-create-weblogic-sample-domain-job exists
No resources found in default namespace.
Creating the domain by creating the job /home/username/azure/weblogic-domains/domain1/create-domain-job.yaml
job.batch/domain1-create-weblogic-sample-domain-job created
Waiting for the job to complete...
status on iteration 1 of 30
pod domain1-create-weblogic-sample-domain-job-v9hp6 status is Init:0/1
status on iteration 2 of 30
pod domain1-create-weblogic-sample-domain-job-v9hp6 status is Completed
domain.weblogic.oracle/domain1 created
cluster.weblogic.oracle/domain1-cluster-1 created

Domain domain1 was created and will be started by the WebLogic Kubernetes Operator

Administration console access is available at http://wlsaks1683-wlsresourcegroup-260524-3dtnmx4n.hcp.eastus.azmk8s.io:30701/console
The following files were generated:
  /home/username/azure/weblogic-domains/domain1/create-domain-inputs.yaml
  /home/username/azure/weblogic-domains/domain1/create-domain-job.yaml
  /home/username/azure/weblogic-domains/domain1/domain.yaml

Completed
</code></pre>
    </div>
</div>
<p>If your output does not show a successful completion, you must
troubleshoot the reason and resolve it before proceeding to the next
step.</p>

<div class="notices note" ><p>This sample creates WebLogic Server pods with reasonable values for memory, CPU, and JVM heap size (as a percentage of memory). These settings were determined by running a skeleton WebLogic domain with minimal or no deployed services and applications on potentially limited or heavily shared container environments. For advice about tuning CPU and memory requests and limits for broader use cases or in a production environment, see the <a href="https://oracle.github.io/weblogic-kubernetes-operator/faq/resource-settings/">Pod memory and CPU resources</a> FAQ. You can supply different values. Edit <code>~/azure/weblogic-on-aks/domain1.yaml</code> and set the desired values for <code>serverPodMemoryRequest</code>, <code>serverPodMemoryLimit</code>, <code>serverPodCpuRequest</code>, <code>serverPodCpuLimit</code> and <code>javaOptions</code> before running <code>./create-domain.sh -i ~/azure/weblogic-on-aks/domain1.yaml -o ~/azure -e -v</code>.</p>
</div>

<p>Here is an excerpt showing reasonable values:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">serverPodMemoryRequest</span>: <span style="color:#e6db74">&#34;1.5Gi&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">serverPodCpuRequest</span>: <span style="color:#e6db74">&#34;250m&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">serverPodMemoryLimit</span>: <span style="color:#e6db74">&#34;1.5Gi&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">serverPodCpuLimit</span>: <span style="color:#e6db74">&#34;250m&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">javaOptions</span>: -<span style="color:#ae81ff">Dweblogic.StdoutDebugEnabled=false -XX:InitialRAMPercentage=25.0 -XX:MaxRAMPercentage=50.0</span>
</span></span></code></pre></div><p>Notice that the <code>Limit</code> and <code>Request</code> values are the same for each of <code>serverPodMemory</code> and <code>serverPodCpu</code>.  This is intentional.  To learn why, see <a href="https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/#create-a-pod-that-gets-assigned-a-qos-class-of-guaranteed">Create a Pod that gets assigned a QoS class of Guaranteed</a>.  You must have allocated sufficient CPU and memory resources so that the pod can be scheduled for running by Kubernetes.  This is an example of <strong>capacity planning</strong>, a very important Kubernetes success factor. For more details on capacity planning with AKS, see <a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/azure-kubernetes-service-cluster-capacity-planning/ba-p/1474990">Azure Kubernetes Service Cluster Capacity Planning
</a>.  For more details about Java and capacity planning, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/faq/resource-settings/">Java heap size and memory resource considerations</a>.</p>
<p>The complete set of values that can be configured in this way is described in <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/domain-home-on-pv/#configuration-parameters">configuration parameters</a>.   If you want further advanced domain configuration, then run <code>./create-domain.sh -i ~/azure/weblogic-on-aks/domain1.yaml -o ~/azure</code>, which will output a Kubernetes domain resource YAML file in <code>~/azure/weblogic-domains/domain.yaml</code>. Edit the <code>domain.yaml</code> file and use <code>kubectl create -f ~/azure/weblogic-domains/domain.yaml</code> to create domain resources.</p>
</li>
<li>
<p>You must create <code>LoadBalancer</code> services for the Administration Server and the WLS cluster.  This enables WLS to service requests from outside the AKS cluster.</p>
<p>Use the sample configuration file <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/domain-on-pv/admin-lb.yaml</code> to create a load balancer service for the Administration Server. If you are choosing not to use the predefined YAML file and instead created new one with customized values, then substitute the following content with your domain values.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">domain1-admin-server-external-lb</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">port</span>: <span style="color:#ae81ff">7001</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">7001</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">weblogic.domainUID</span>: <span style="color:#ae81ff">domain1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">weblogic.serverName</span>: <span style="color:#ae81ff">admin-server</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sessionAffinity</span>: <span style="color:#ae81ff">None</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span></code></pre></div><p>Use the sample configuration file <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/domain-on-pv/cluster-lb.yaml</code> to create a load balancer service for the Managed Servers. If you are choosing not to use the predefined YAML file and instead created new one with customized values, then substitute the following content with your domain values.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">domain1-cluster-1-lb</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8001</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">8001</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">weblogic.domainUID</span>: <span style="color:#ae81ff">domain1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">weblogic.clusterName</span>: <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sessionAffinity</span>: <span style="color:#ae81ff">None</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span></code></pre></div><p>Create the load balancer services using the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f ~/azure/weblogic-on-aks/admin-lb.yaml
</span></span></code></pre></div><pre tabindex="0"><code>service/domain1-admin-server-external-lb created
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl  apply -f ~/azure/weblogic-on-aks/cluster-lb.yaml
</span></span></code></pre></div><pre tabindex="0"><code>service/domain1-cluster-1-external-lb created
</code></pre><p>After a short time, you will see the Administration Server and Managed Servers running.</p>
<p>Use the following command to check server pod status:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pods --watch
</span></span></code></pre></div><p>It may take you up to 20 minutes to deploy all pods, please wait and make sure everything is ready.</p>
<p>You can tail the logs of the Administration Server with this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl logs -f domain1-admin-server
</span></span></code></pre></div><p>The final example of pod output is as following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pods --watch
</span></span></code></pre></div><pre tabindex="0"><code>NAME                                              READY   STATUS      RESTARTS   AGE
domain1-admin-server                              1/1     Running     0          6m34s
domain1-create-weblogic-sample-domain-job-v9hp6   0/1     Completed   0          9m21s
domain1-managed-server1                           1/1     Running     0          3m30s
domain1-managed-server2                           1/1     Running     0          3m30s
weblogic-operator-69794f8df7-bmvj9                1/1     Running     0          20m
weblogic-operator-webhook-868db5875b-55v7r        1/1     Running     0          20m
</code></pre>
<div class="notices tip" ><p>If Kubernetes advertises the WebLogic pod as <code>Running</code> you can be assured the WebLogic Server actually is running because the operator ensures that the Kubernetes health checks are actually polling the WebLogic health check mechanism.</p>
</div>

<p>Get the addresses of the Administration Server and Managed Servers (please wait for the external IP addresses to be assigned):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get svc --watch
</span></span></code></pre></div><p>The final example of service output is as following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get svc --watch
</span></span></code></pre></div><pre tabindex="0"><code>NAME                               TYPE           CLUSTER-IP    EXTERNAL-IP    PORT(S)              AGE
domain1-admin-server               ClusterIP      None          &lt;none&gt;         30012/TCP,7001/TCP   7m51s
domain1-admin-server-ext           NodePort       10.0.25.1     &lt;none&gt;         7001:30701/TCP       7m51s
domain1-admin-server-external-lb   LoadBalancer   10.0.103.99   20.253.86.5    7001:32596/TCP       7m37s
domain1-cluster-1-external-lb      LoadBalancer   10.0.95.193   20.253.86.73   8001:32595/TCP       7m22s
domain1-cluster-cluster-1          ClusterIP      10.0.97.134   &lt;none&gt;         8001/TCP             4m47s
domain1-managed-server1            ClusterIP      None          &lt;none&gt;         8001/TCP             4m47s
domain1-managed-server2            ClusterIP      None          &lt;none&gt;         8001/TCP             4m47s
kubernetes                         ClusterIP      10.0.0.1      &lt;none&gt;         443/TCP              100m
weblogic-operator-webhook-svc      ClusterIP      10.0.188.9    &lt;none&gt;         8083/TCP,8084/TCP    21m
</code></pre><p>In the example, the URL to access the Administration Server is: <code>http://52.188.176.103:7001/console</code>.
The user name and password that you enter for the Administration Console must match the ones you specified for the <code>domain1-weblogic-credentials</code> secret in the <a href="#create-secrets">Create secrets</a> step.</p>
<p>If the WLS Administration Console is still not available, use <code>kubectl describe domain</code> to check domain status.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl describe domain domain1
</span></span></code></pre></div><p>Make sure the status of cluster-1 is <code>ServersReady</code> and <code>Available</code>.

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to view the example status.
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Status</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">Clusters</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:      <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Maximum Replicas</span>:  <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Minimum Replicas</span>:  <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Ready Replicas</span>:    <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Replicas</span>:          <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Replicas Goal</span>:     <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">Conditions</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Last Transition Time</span>:  <span style="color:#e6db74">2020-07-06T05:39:32.539Z</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Reason</span>:                <span style="color:#ae81ff">ServersReady</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Status</span>:                <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Type</span>:                  <span style="color:#ae81ff">Available</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">Replicas</span>:                <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">Servers</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Node Name</span>:      <span style="color:#ae81ff">aks-nodepool1-11471722-vmss000001</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">admin-server</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">State</span>:          <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:   <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Node Name</span>:      <span style="color:#ae81ff">aks-nodepool1-11471722-vmss000001</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">managed-server1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">State</span>:          <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:   <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Node Name</span>:      <span style="color:#ae81ff">aks-nodepool1-11471722-vmss000001</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">managed-server2</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">State</span>:          <span style="color:#ae81ff">RUNNING</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:   <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">SHUTDOWN</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">managed-server3</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:   <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">SHUTDOWN</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">managed-server4</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Cluster Name</span>:   <span style="color:#ae81ff">cluster-1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Desired State</span>:  <span style="color:#ae81ff">SHUTDOWN</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">Server Name</span>:    <span style="color:#ae81ff">managed-server5</span>
</span></span></code></pre></div>
    </div>
</div></p>
</li>
</ol>
<p>To deploy a sample application on WLS, you may skip to the section <a href="#deploy-sample-application">Deploy sample application</a>.  The next section includes a script that automates all of the preceding steps.</p>
<h4 id="automation">Automation</h4>
<p>If you want to automate the above steps of creating AKS cluster and WLS domain, you can use the script <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/create-domain-on-aks.sh</code>.</p>
<p>The sample script will create a WLS domain home on the AKS cluster, including:</p>
<ul>
<li>Creating a new Azure resource group, with a new Azure Storage Account and Azure File Share to allow WebLogic to persist its configuration and data separately from the Kubernetes pods that run WLS workloads.</li>
<li>Creating WLS domain home.</li>
<li>Generating the domain resource YAML files, which can be used to restart the Kubernetes artifacts of the corresponding domain.</li>
</ul>
<p>For input values, you can edit <code>kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service/create-domain-on-aks-inputs.yaml</code> directly, or copy the file and edit your copy. The following values must be specified:</p>
<table>
<thead>
<tr>
<th>Name in YAML file</th>
<th>Example value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dockerEmail</code></td>
<td><code>yourDockerEmail</code></td>
<td>Oracle Single Sign-On (SSO) account email, used to pull the WebLogic Server Docker image.</td>
</tr>
<tr>
<td><code>dockerPassword</code></td>
<td><code>yourDockerPassword</code></td>
<td>Password for Oracle SSO account, used to pull the WebLogic Server Docker image, in clear text.</td>
</tr>
<tr>
<td><code>dockerUserName</code></td>
<td><code>yourDockerId</code></td>
<td>The same value as <code>dockerEmail</code>.</td>
</tr>
<tr>
<td><code>namePrefix</code></td>
<td><code>wls</code></td>
<td>Alphanumeric value used as a disambiguation prefix for several Kubernetes resources.</td>
</tr>
<tr>
<td><code>weblogicUserName</code></td>
<td><code>&lt;WebLogic admin username&gt;</code></td>
<td>Enter your choice for a WebLogic administration username.</td>
</tr>
<tr>
<td><code>weblogicAccountPassword</code></td>
<td><code>&lt;WebLogic admin password&gt;</code></td>
<td>Enter your choice for a WebLogic administration password. It must be at least eight characters long and contain at least one digit.</td>
</tr>
</tbody>
</table>
<p>If you don&rsquo;t want to change the other parameters, you can use the default values.
Please make sure no extra whitespaces are added!
Please also remember the username and password that you chose for the WebLogic administrator account.</p>
<pre tabindex="0"><code># Use ~/azure as output directory, please change it according to your requirement.

# cd kubernetes/samples/scripts/create-weblogic-domain-on-azure-kubernetes-service
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cp create-domain-on-aks-inputs.yaml my-create-domain-on-aks-inputs.yaml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./create-domain-on-aks.sh -i my-create-domain-on-aks-inputs.yaml -o ~/azure -e
</span></span></code></pre></div><p>The script will print the Administration Server address after a successful deployment.
To interact with the cluster using <code>kubectl</code>, use <code>az aks get-credentials</code> as shown in the script output.</p>

<div class="notices info" ><p>You now have created an AKS cluster with Azure Files NFS share to contain the WLS domain configuration files.  Using those artifacts, you have used the operator to create a WLS domain.</p>
</div>

<h4 id="deploy-sample-application">Deploy sample application</h4>
<p>Now that you have WLS running in AKS, you can test the cluster by deploying the simple sample application included in the repository.</p>
<p>First, package the application with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd integration-tests/src/test/resources/bash-scripts
</span></span><span style="display:flex;"><span>bash build-war-app.sh -s ../apps/testwebapp/ -d /tmp/testwebapp
</span></span></code></pre></div><p>Successful output will look similar to the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Found source at ../apps/testwebapp/
</span></span><span style="display:flex;"><span>build /tmp/testwebapp/testwebapp.war with command jar -cvf /tmp/testwebapp/testwebapp.war *
</span></span><span style="display:flex;"><span>added manifest
</span></span><span style="display:flex;"><span>ignoring entry META-INF/
</span></span><span style="display:flex;"><span>ignoring entry META-INF/MANIFEST.MF
</span></span><span style="display:flex;"><span>adding: META-INF/maven/(in = 0) (out= 0)(stored 0%)
</span></span><span style="display:flex;"><span>adding: META-INF/maven/com.oracle.weblogic/(in = 0) (out= 0)(stored 0%)
</span></span><span style="display:flex;"><span>adding: META-INF/maven/com.oracle.weblogic/testwebapp/(in = 0) (out= 0)(stored 0%)
</span></span><span style="display:flex;"><span>adding: META-INF/maven/com.oracle.weblogic/testwebapp/pom.properties(in = 117) (out= 113)(deflated 3%)
</span></span><span style="display:flex;"><span>adding: META-INF/maven/com.oracle.weblogic/testwebapp/pom.xml(in = 1210) (out= 443)(deflated 63%)
</span></span><span style="display:flex;"><span>adding: WEB-INF/(in = 0) (out= 0)(stored 0%)
</span></span><span style="display:flex;"><span>adding: WEB-INF/web.xml(in = 951) (out= 428)(deflated 54%)
</span></span><span style="display:flex;"><span>adding: WEB-INF/weblogic.xml(in = 1140) (out= 468)(deflated 58%)
</span></span><span style="display:flex;"><span>adding: index.jsp(in = 1001) (out= 459)(deflated 54%)
</span></span><span style="display:flex;"><span>-rw-r--r-- 1 user user 3528 Jul  5 14:25 /tmp/testwebapp/testwebapp.war
</span></span></code></pre></div><p>Now, you are able to deploy the sample application in <code>/tmp/testwebapp/testwebapp.war</code> to the cluster. This sample uses WLS RESTful API <a href="https://docs.oracle.com/en/middleware/standalone/weblogic-server/14.1.1.0/wlrer/op-management-weblogic-version-edit-appdeployments-x-operations-1.html">/management/weblogic/latest/edit/appDeployments</a> to deploy the sample application.
Replace <code>&lt;WebLogic admin username&gt;</code> and <code>&lt;WebLogic admin password&gt;</code> with the values you specified in <a href="#create-secrets">Create secrets</a> or <a href="#automation">Automation</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ADMIN_SERVER_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get svc domain1-admin-server-external-lb -o<span style="color:#f92672">=</span>jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>$ curl --user &lt;WebLogic admin username&gt;:&lt;WebLogic admin password&gt; -H X-Requested-By:MyClient  -H Accept:application/json -s -v <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H Content-Type:multipart/form-data  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F <span style="color:#e6db74">&#34;model={
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        name:    &#39;testwebapp&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        targets: [ { identity: [ &#39;clusters&#39;, &#39;cluster-1&#39; ] } ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -F <span style="color:#e6db74">&#34;sourcePath=@/tmp/testwebapp/testwebapp.war&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Prefer:respond-async&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -X POST http://<span style="color:#e6db74">${</span>ADMIN_SERVER_IP<span style="color:#e6db74">}</span>:7001/management/weblogic/latest/edit/appDeployments
</span></span></code></pre></div><p>After the successful deployment, you will find output similar to the following:</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to view the output.
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>*   Trying 52.226.101.43:7001...
</span></span><span style="display:flex;"><span>* TCP_NODELAY set
</span></span><span style="display:flex;"><span>* Connected to 52.226.101.43 (52.226.101.43) port 7001 (#0)
</span></span><span style="display:flex;"><span>* Server auth using Basic with user &#39;weblogic&#39;
</span></span><span style="display:flex;"><span>&gt; POST /management/weblogic/latest/edit/appDeployments HTTP/1.1
</span></span><span style="display:flex;"><span>&gt; Host: 52.226.101.43:7001
</span></span><span style="display:flex;"><span>&gt; Authorization: Basic ...=
</span></span><span style="display:flex;"><span>&gt; User-Agent: curl/7.68.0
</span></span><span style="display:flex;"><span>&gt; X-Requested-By:MyClient
</span></span><span style="display:flex;"><span>&gt; Accept:application/json
</span></span><span style="display:flex;"><span>&gt; Prefer:respond-async
</span></span><span style="display:flex;"><span>&gt; Content-Length: 3925
</span></span><span style="display:flex;"><span>&gt; Content-Type: multipart/form-data; boundary=------------------------cc76a2c2d819911f
</span></span><span style="display:flex;"><span>&gt; Expect: 100-continue
</span></span><span style="display:flex;"><span>&gt;
</span></span><span style="display:flex;"><span>* Mark bundle as not supporting multiuse
</span></span><span style="display:flex;"><span>&lt; HTTP/1.1 100 Continue
</span></span><span style="display:flex;"><span>* We are completely uploaded and fine
</span></span><span style="display:flex;"><span>* Mark bundle as not supporting multiuse
</span></span><span style="display:flex;"><span>&lt; HTTP/1.1 202 Accepted
</span></span><span style="display:flex;"><span>&lt; Date: Thu, 11 Aug 2022 08:32:56 GMT
</span></span><span style="display:flex;"><span>&lt; Location: http://domain1-admin-server:7001/management/weblogic/latest/domainRuntime/deploymentManager/deploymentProgressObjects/testwebapp
</span></span><span style="display:flex;"><span>&lt; Content-Length: 764
</span></span><span style="display:flex;"><span>&lt; Content-Type: application/json
</span></span><span style="display:flex;"><span>&lt; X-ORACLE-DMS-ECID: 6f205c83-e172-4c34-a638-7f0c6345ce45-00000055
</span></span><span style="display:flex;"><span>&lt; X-ORACLE-DMS-RID: 0
</span></span><span style="display:flex;"><span>&lt; Set-Cookie: JSESSIONID=NOCMCQBO7dxyA2lUfCYp4zSYIeFB0S3V1KRRzigmmoOUfmQmlLOh!-546081476; path=/; HttpOnly
</span></span><span style="display:flex;"><span>&lt; Vary: Accept-Encoding
</span></span><span style="display:flex;"><span>&lt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    &#34;links&#34;: [{
</span></span><span style="display:flex;"><span>        &#34;rel&#34;: &#34;job&#34;,
</span></span><span style="display:flex;"><span>        &#34;href&#34;: &#34;http:\/\/domain1-admin-server:7001\/management\/weblogic\/latest\/domainRuntime\/deploymentManager\/deploymentProgressObjects\/testwebapp&#34;
</span></span><span style="display:flex;"><span>    }],
</span></span><span style="display:flex;"><span>    &#34;identity&#34;: [
</span></span><span style="display:flex;"><span>        &#34;deploymentManager&#34;,
</span></span><span style="display:flex;"><span>        &#34;deploymentProgressObjects&#34;,
</span></span><span style="display:flex;"><span>        &#34;testwebapp&#34;
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    &#34;rootExceptions&#34;: [],
</span></span><span style="display:flex;"><span>    &#34;deploymentMessages&#34;: [],
</span></span><span style="display:flex;"><span>    &#34;name&#34;: &#34;testwebapp&#34;,
</span></span><span style="display:flex;"><span>    &#34;operationType&#34;: 3,
</span></span><span style="display:flex;"><span>    &#34;startTimeAsLong&#34;: 1660206785965,
</span></span><span style="display:flex;"><span>    &#34;state&#34;: &#34;STATE_RUNNING&#34;,
</span></span><span style="display:flex;"><span>    &#34;id&#34;: &#34;0&#34;,
</span></span><span style="display:flex;"><span>    &#34;type&#34;: &#34;DeploymentProgressObject&#34;,
</span></span><span style="display:flex;"><span>    &#34;targets&#34;: [&#34;cluster-1&#34;],
</span></span><span style="display:flex;"><span>    &#34;applicationName&#34;: &#34;testwebapp&#34;,
</span></span><span style="display:flex;"><span>    &#34;failedTargets&#34;: [],
</span></span><span style="display:flex;"><span>    &#34;progress&#34;: &#34;processing&#34;,
</span></span><span style="display:flex;"><span>    &#34;completed&#34;: false,
</span></span><span style="display:flex;"><span>    &#34;intervalToPoll&#34;: 1000,
</span></span><span style="display:flex;"><span>    &#34;startTime&#34;: &#34;2022-08-11T08:33:05.965Z&#34;
</span></span><span style="display:flex;"><span>* Connection #0 to host 52.226.101.43 left intact
</span></span></code></pre></div>
    </div>
</div>
<p>Now, you can go to the application through the <code>domain1-cluster-1-lb</code> external IP.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ CLUSTER_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get svc domain1-cluster-1-external-lb -o<span style="color:#f92672">=</span>jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ curl http://<span style="color:#e6db74">${</span>CLUSTER_IP<span style="color:#e6db74">}</span>:8001/testwebapp/
</span></span></code></pre></div><p>The test application will list the server host and server IP on the output, like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">http-equiv</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Content-Type&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/html; charset=UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/testwebapp/res/styles.css;jsessionid=9uiMDakndtPlZTyDB9A-OKZEFBBAPyIs_9bG3qC4uA3PYaI8DsH1!-1450005246&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;Test WebApp&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">li</span>&gt;InetAddress: domain1-managed-server1/10.244.1.8
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">li</span>&gt;InetAddress.hostname: domain1-managed-server1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><h4 id="validate-nfs-volume">Validate NFS volume</h4>
<p>There are several approaches to validate the NFS volume:</p>
<ul>
<li>Use Azure Storage browser. Make sure you have permission to access the NFS server, see <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security?tabs=azure-portal">Azure Storage firewalls and virtual networks document</a></li>
<li>Mount the same NFS share in an existing virtual machine from Azure. Access files from the mounted path, see <a href="https://docs.microsoft.com/en-us/azure/storage/files/storage-files-how-to-mount-nfs-shares">Mount Azure NFS file share to Linux</a>.</li>
</ul>
<p>Use <code>kubectl exec</code> to enter the admin server pod to check file system status:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl exec -it domain1-admin-server -- df -h
</span></span></code></pre></div><p>You will find output like the following, with filesystem <code>${AKS_PERS_STORAGE_ACCOUNT_NAME}.file.core.windows.net:/${AKS_PERS_STORAGE_ACCOUNT_NAME}/${AKS_PERS_SHARE_NAME}</code>, size <code>100G</code>, and mounted on <code>/shared</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Filesystem                                                                                Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>wlsstorage1612795811.file.core.windows.net:/wlsstorage1612795811/wls-weblogic-1612795811  100G   76M  100G   1% /shared
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h4 id="clean-up-resources">Clean up resources</h4>

<p>The output from the <code>create-domain-on-aks.sh</code> script includes a statement about the Azure resources created by the script.  To delete the cluster and free all related resources, simply delete the resource groups.  The output will list the resource groups, such as.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>The following Azure resources have been created:
</span></span><span style="display:flex;"><span>  Resource groups: ejb8191resourcegroup1597641911, MC_ejb8191resourcegroup1597641911_ejb8191akscluster1597641911_eastus
</span></span></code></pre></div><p>Given the above output, the following Azure CLI commands will delete the resource groups.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az group delete --yes --no-wait --name ejb8191resourcegroup1597641911
</span></span><span style="display:flex;"><span>$ az group delete --yes --no-wait --name MC_ejb8191resourcegroup1597641911_ejb8191akscluster1597641911_eastus
</span></span></code></pre></div>

<p>If you created the AKS cluster step by step, run the following commands to clean up resources.</p>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ az group delete --yes --no-wait --name $AKS_PERS_RESOURCE_GROUP
</span></span><span style="display:flex;"><span>$ az group delete --yes --no-wait --name <span style="color:#e6db74">&#34;MC_</span>$AKS_PERS_RESOURCE_GROUP<span style="color:#e6db74">&#34;</span>_<span style="color:#e6db74">&#34;</span>$AKS_CLUSTER_NAME<span style="color:#e6db74">&#34;</span>_<span style="color:#e6db74">&#34;</span>$AKS_PERS_LOCATION<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div>

<h4 id="troubleshooting">Troubleshooting</h4>
<p>For troubleshooting advice, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/troubleshooting/">Troubleshooting</a>.</p>
<h4 id="useful-links">Useful links</h4>
<ul>
<li><a href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/domains/domain-home-on-pv/">Domain on a PV</a> sample</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/" title="Azure Kubernetes Service"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://oracle.github.io/weblogic-kubernetes-operator/4.0/samples/azure-kubernetes-service/model-in-image/" title="Model in Image" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/clipboard.min.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/perfect-scrollbar.min.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/perfect-scrollbar.jquery.min.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/jquery.sticky.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/featherlight.min.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/highlight.pack.js?1711250416"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/modernizr.custom-3.6.0.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/learn.js?1711250416"></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/js/hugo-learn.js?1711250416"></script>
    
        
            <script src="https://oracle.github.io/weblogic-kubernetes-operator/4.0/mermaid/mermaid.js?1711250416"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

