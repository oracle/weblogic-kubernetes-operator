<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.153.0">
    <meta name="generator" content="Relearn 8.3.0">
    <meta name="description" content="FMW Infrastructure domains contain the Java Required Files (JRF) feature and are the prerequisite for upper stack products like Oracle SOA Suite.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Manage FMW Infrastructure domains :: WebLogic Kubernetes Operator">
    <meta name="twitter:description" content="FMW Infrastructure domains contain the Java Required Files (JRF) feature and are the prerequisite for upper stack products like Oracle SOA Suite.">
    <meta property="og:url" content="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/managing-fmw-domains/index.html">
    <meta property="og:site_name" content="WebLogic Kubernetes Operator">
    <meta property="og:title" content="Manage FMW Infrastructure domains :: WebLogic Kubernetes Operator">
    <meta property="og:description" content="FMW Infrastructure domains contain the Java Required Files (JRF) feature and are the prerequisite for upper stack products like Oracle SOA Suite.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Manage domains">
    <meta property="article:published_time" content="2019-04-18T06:46:23-05:00">
    <meta property="article:modified_time" content="2019-04-18T06:46:23-05:00">
    <meta itemprop="name" content="Manage FMW Infrastructure domains :: WebLogic Kubernetes Operator">
    <meta itemprop="description" content="FMW Infrastructure domains contain the Java Required Files (JRF) feature and are the prerequisite for upper stack products like Oracle SOA Suite.">
    <meta itemprop="datePublished" content="2019-04-18T06:46:23-05:00">
    <meta itemprop="dateModified" content="2019-04-18T06:46:23-05:00">
    <meta itemprop="wordCount" content="2451">
    <title>Manage FMW Infrastructure domains :: WebLogic Kubernetes Operator</title>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/images/logo.png?1767152691" rel="icon" type="image/png">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/auto-complete/auto-complete.min.css?1767152691" rel="stylesheet">
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/auto-complete/auto-complete.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search-lunr.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search.min.js?1767152691" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="https://oracle.github.io/weblogic-kubernetes-operator/searchindex.en.js?1767152691";
    </script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.stemmer.support.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.multi.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.en.min.js?1767152691" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1767152691" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1767152691" rel="stylesheet"></noscript>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/perfect-scrollbar/perfect-scrollbar.min.css?1767152691" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/theme.min.css?1767152691" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/format-html.min.css?1767152691" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/managing-domains\/managing-fmw-domains\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/weblogic-kubernetes-operator';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'learn' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/managing-fmw-domains/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#limitations">Limitations</a></li>
    <li><a href="#obtaining-the-fmw-infrastructure-image">Obtaining the FMW Infrastructure image</a></li>
    <li><a href="#creating-an-fmw-infrastructure-image">Creating an FMW Infrastructure image</a></li>
    <li><a href="#configuring-access-to-your-database">Configuring access to your database</a>
      <ul>
        <li><a href="#running-the-database-inside-kubernetes">Running the database inside Kubernetes</a></li>
        <li><a href="#running-the-database-outside-kubernetes">Running the database outside Kubernetes</a></li>
      </ul>
    </li>
    <li><a href="#running-the-repository-creation-utility-to-set-up-your-database-schema">Running the Repository Creation Utility to set up your database schema</a>
      <ul>
        <li><a href="#creating-schemas">Creating schemas</a></li>
        <li><a href="#dropping-schemas">Dropping schemas</a></li>
      </ul>
    </li>
    <li><a href="#create-a-kubernetes-secret-with-the-rcu-credentials">Create a Kubernetes Secret with the RCU credentials</a></li>
    <li><a href="#creating-an-fmw-infrastructure-domain">Creating an FMW Infrastructure domain</a></li>
    <li><a href="#patching-the-fmw-infrastructure-image">Patching the FMW Infrastructure image</a></li>
    <li><a href="#additional-considerations-for-coherence">Additional considerations for Coherence</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><span itemprop="name">WebLogic Kubernetes Operator</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html"><span itemprop="name">Manage domains</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Manage FMW Infrastructure domains</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/cicd/tools/index.html" title="Tools (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/aks/index.html" title="Azure Kubernetes Service (AKS) (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable managing-domains" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>



<h1 id="manage-fmw-infrastructure-domains">Manage FMW Infrastructure domains</h1>



<h3 id="contents">Contents</h3>
<div class="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#limitations">Limitations</a></li>
    <li><a href="#obtaining-the-fmw-infrastructure-image">Obtaining the FMW Infrastructure image</a></li>
    <li><a href="#creating-an-fmw-infrastructure-image">Creating an FMW Infrastructure image</a></li>
    <li><a href="#configuring-access-to-your-database">Configuring access to your database</a>
      <ul>
        <li><a href="#running-the-database-inside-kubernetes">Running the database inside Kubernetes</a></li>
        <li><a href="#running-the-database-outside-kubernetes">Running the database outside Kubernetes</a></li>
      </ul>
    </li>
    <li><a href="#running-the-repository-creation-utility-to-set-up-your-database-schema">Running the Repository Creation Utility to set up your database schema</a>
      <ul>
        <li><a href="#creating-schemas">Creating schemas</a></li>
        <li><a href="#dropping-schemas">Dropping schemas</a></li>
      </ul>
    </li>
    <li><a href="#create-a-kubernetes-secret-with-the-rcu-credentials">Create a Kubernetes Secret with the RCU credentials</a></li>
    <li><a href="#creating-an-fmw-infrastructure-domain">Creating an FMW Infrastructure domain</a></li>
    <li><a href="#patching-the-fmw-infrastructure-image">Patching the FMW Infrastructure image</a></li>
    <li><a href="#additional-considerations-for-coherence">Additional considerations for Coherence</a></li>
  </ul>
</nav></div>
<p>The operator supports FMW Infrastructure domains, that is,
domains that are created with the FMW Infrastructure installer rather than the WebLogic
Server installer.  These domains contain Java Required Files (JRF), which are
a prerequisite for &ldquo;upper stack&rdquo; products like Oracle SOA Suite, for example.
These domains also require a database and the use of the Repository
Creation Utility (RCU).</p>
<p>This document provides details about the special considerations for running
FMW Infrastructure domains with the operator.  Other than those considerations
listed here, FMW Infrastructure domains work in the same way as WebLogic Server domains.
The remainder of the documentation in this site applies equally to FMW
Infrastructure domains and WebLogic Server domains.</p>
<p><strong>NOTE</strong>: FMW Infrastructure domains are supported using the Domain on PV 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/"
   
   >
domain home source type
</a>
 <em>only</em>.</p>
<p>For more information about the deployment of Oracle Fusion Middleware products on Kubernetes, see 

<a href="https://oracle.github.io/fmw-kubernetes/"
   
   
target="_blank" rel="noopener noreferrer"
>
https://oracle.github.io/fmw-kubernetes/
</a>
.</p>
<h3 id="limitations">Limitations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Compared to running a WebLogic Server domain in Kubernetes using the operator, the
following limitations currently exist for FMW Infrastructure domains:</p>
<ul>
<li>The 

<a href="https://github.com/oracle/weblogic-monitoring-exporter"
   
   
target="_blank" rel="noopener noreferrer"
>
WebLogic Monitoring Exporter
</a>

currently supports the WebLogic MBean trees only.  Support for JRF MBeans has not
been added yet.</li>
<li>Only configured clusters are supported.  Dynamic clusters are not supported for
FMW Infrastructure domains.  Note that you can still use all of the scaling features,
you just need to define the maximum size of your cluster at domain creation time.</li>
<li>FMW Infrastructure domains are not supported with any version of the operator
before version 2.2.0.</li>
<li>FMW Infrastructure domains are <em>not</em> supported using the Model in Image or Domain in Image 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/"
   
   >
domain home source types
</a>
.</li>
</ul>
<h3 id="obtaining-the-fmw-infrastructure-image">Obtaining the FMW Infrastructure image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>The WebLogic Kubernetes Operator requires patch 29135930.
The standard pre-built FMW Infrastructure General Availability image, <code>container-registry.oracle.com/middleware/fmw-infrastructure:12.2.1.3</code>, already
has this patch applied. The FMW Infrastructure 12.2.1.4.0 images do not require this patch. For detailed instructions
on how to log in to the Oracle Container Registry and accept license agreement, see this 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/ocr-images/#obtain-images-from-the-oracle-container-registry"
   
   >
document
</a>
.</p>
<p><strong>NOTE</strong>: As of December, 2022, Fusion Middleware 12.2.1.3 is no longer supported.  The last Critical Patch Updates (CPU) images for FMW Infrastructure 12.2.1.3 were published in October, 2022. As of June, 2023, Oracle WebLogic Server 12.2.1.3 is no longer supported. The last CPU images for WebLogic Server 12.2.1.3 were published in April, 2023.</p>

<details open class="box cstyle notices warning">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-triangle"></i> 
    Warning
  </summary>
  <div class="box-content">
<p>This sample uses General Availability (GA) images. GA images are suitable for demonstration and development purposes <em>only</em> where the environments are not available from the public Internet; they are <strong>not acceptable for production use</strong>. In production, you should always use CPU (patched) images from 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/ocr-images/"
   
   >
OCR
</a>
 or create your images using the 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/custom-images/#create-a-custom-base-image"
   
   >
WebLogic Image Tool
</a>
 (WIT) with the <code>--recommendedPatches</code> option. For more guidance, see 

<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/middleware/standalone/weblogic-server/14.1.1.0&amp;id=LOCKD-GUID-2DA84185-46BA-4D7A-80D2-9D577A4E8DE2"
   
   
target="_blank" rel="noopener noreferrer"
>
Apply the Latest Patches and Updates
</a>
 in <em>Securing a Production Environment for Oracle WebLogic Server</em>.</p>
  </div>
</details>
<p>To pull an image from the Oracle Container Registry, in a web browser, navigate to 

<a href="https://container-registry.oracle.com"
   
   
target="_blank" rel="noopener noreferrer"
>
https://container-registry.oracle.com
</a>
 and log in
using the Oracle Single Sign-On authentication service. If you do not already have SSO credentials, at the top of the page, click the Sign In link to create them.</p>
<p>Use the web interface to accept the Oracle Standard Terms and Restrictions for the Oracle software images that you intend to deploy.
Your acceptance of these terms is stored in a database that links the software images to your Oracle Single Sign-On login credentials.</p>
<p>First, you will need to log in to the Oracle Container Registry:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker login container-registry.oracle.com</span></span></code></pre></div>
<p>Then, you can pull the image with this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ docker pull container-registry.oracle.com/middleware/fmw-infrastructure:14.1.2.0-jdk17-ol8</span></span></code></pre></div>
<p>If desired, you can:</p>
<ul>
<li>
<p>Check the WLS version with <code>docker run container-registry.oracle.com/middleware/fmw-infrastructure:14.1.2.0-jdk17-ol8 sh -c</code> <code>'source $ORACLE_HOME/wlserver/server/bin/setWLSEnv.sh &gt; /dev/null 2&gt;&amp;1 &amp;&amp; java weblogic.version'</code></p>
</li>
<li>
<p>Check the WLS patches with <code>docker run container-registry.oracle.com/middleware/fmw-infrastructure:14.1.2.0-jdk17-ol8 sh -c</code> <code>'$ORACLE_HOME/OPatch/opatch lspatches'</code></p>
</li>
</ul>
<p>Additional information about using this image is available in the


<a href="https://container-registry.oracle.com"
   
   
target="_blank" rel="noopener noreferrer"
>
Oracle Container Registry
</a>
.</p>
<h3 id="creating-an-fmw-infrastructure-image">Creating an FMW Infrastructure image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>You can also create an image containing the FMW Infrastructure binaries.
We provide a 

<a href="https://github.com/oracle/docker-images/tree/master/OracleFMWInfrastructure"
   
   
target="_blank" rel="noopener noreferrer"
>
sample
</a>

in the Oracle GitHub account that demonstrates how to create an image
to run the FMW Infrastructure. Please consult the 

<a href="https://github.com/oracle/docker-images/blob/master/OracleFMWInfrastructure/dockerfiles/12.2.1.4/README.md"
   
   
target="_blank" rel="noopener noreferrer"
>
README
</a>

file associated with this sample for important prerequisite steps,
such as building or pulling the Server JRE image and downloading the Fusion Middleware
Infrastructure installer binary.</p>
<p>After cloning the repository and downloading the installer from Oracle Technology Network
or e-delivery, you create your image by running the provided script:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd docker-images/OracleFMWInfrastructure/dockerfiles</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./buildDockerImage.sh -v 12.2.1.4 -s</span></span></code></pre></div>
<p>The image produced will be named <code>oracle/fmw-infrastructure:12.2.1.4</code>.</p>
<p>You must also install the 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/introduction/prerequisites/introduction/"
   
   >
required patch
</a>

to use this image with the operator.  We provide a 

<a href="https://github.com/oracle/docker-images/tree/master/OracleFMWInfrastructure/samples/12213-patch-fmw-for-k8s"
   
   
target="_blank" rel="noopener noreferrer"
>
sample
</a>

that demonstrates how to create an image with the necessary patch installed.</p>
<p>After downloading the patch from My Oracle Support, you create the patched image
by running the provided script:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd docker-images/OracleFMWInfrastructure/samples/12213-patch-fmw-for-k8s</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./build.sh</span></span></code></pre></div>
<p>This will produce an image named <code>oracle/fmw-infrastructure:12213-update-k8s</code>.</p>
<p>All samples and instructions reference the pre-built image, <code>container-registry.oracle.com/middleware/fmw_infrastructure:12.2.1.4</code>. Because these samples build an image based on WebLogic Server 12.2.1.3 and use the tag, <code>oracle/fmw-infrastructure:12213-update-k8s</code>, be sure to update your sample inputs to use this <code>image</code> value.</p>
<p>These samples allow you to create an image containing the FMW Infrastructure
binaries and the necessary patch.  You can use this image to run the Repository Creation Utility
and to run your domain using the &ldquo;domain on a persistent volume&rdquo; model. If you want to use
the &ldquo;domain in an image&rdquo; model, you will need to go one step further and add another
layer with your domain in it.  You can use WLST or WDT to create your domain.</p>
<p>Before creating a domain, you will need to set up the necessary schemas in your database.</p>
<h3 id="configuring-access-to-your-database">Configuring access to your database<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>FMW Infrastructure domains require a database with the necessary schemas installed in them.
We provide a utility, called the Repository Creation Utility (RCU), which allows you to create
those schemas.  You must set up the database before you create your domain.
There are no additional requirements added by running FMW Infrastructure in Kubernetes; the
same existing requirements apply.</p>
<p>For testing and development, you may choose to run your database inside Kubernetes or outside of Kubernetes.</p>

<details open class="box cstyle notices warning">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-triangle"></i> 
    Warning
  </summary>
  <div class="box-content">
<p>The Oracle Database images are supported only for non-production use.
For more details, see My Oracle Support note:
Oracle Support for Database Running on Docker 

<a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=2216342.1"
   
   
target="_blank" rel="noopener noreferrer"
>
Doc ID 2216342.1
</a>
.</p>
  </div>
</details>
<h4 id="running-the-database-inside-kubernetes">Running the database inside Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If you wish to run the database inside Kubernetes, you can use the official container image
from the 

<a href="https://container-registry.oracle.com/pls/apex/f?p=113:1:10859199204803::NO:1:P1_BUSINESS_AREA:3"
   
   
target="_blank" rel="noopener noreferrer"
>
Oracle Container Registry
</a>
.
Please note that there is a Slim Variant (<code>12.2.0.1-slim</code> tag) of EE that has reduced
disk space (4GB) requirements and a quicker container startup.</p>
<p>Running the database inside the Kubernetes cluster is possibly more relevant or
desirable in test/development or CI/CD scenarios.</p>
<p>Here is an example of a Kubernetes YAML file to define a deployment of the Oracle
database:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">strategy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rollingUpdate</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxSurge</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxUnavailable</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">RollingUpdate</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">creationTimestamp</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">DB_SID</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">value</span>: <span style="color:#ae81ff">devcdb</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">DB_PDB</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">value</span>: <span style="color:#ae81ff">devpdb</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">DB_DOMAIN</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">value</span>: <span style="color:#ae81ff">k8s</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">container-registry.oracle.com/database/enterprise:12.2.0.1-slim</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tns</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">2Gi</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">terminationMessagePath</span>: <span style="color:#ae81ff">/dev/termination-log</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">terminationMessagePolicy</span>: <span style="color:#ae81ff">File</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirst</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">Always</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">schedulerName</span>: <span style="color:#ae81ff">default-scheduler</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">securityContext</span>: {}
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">terminationGracePeriodSeconds</span>: <span style="color:#ae81ff">30</span></span></span></code></pre></div>
<p>Notice that you can pass in environment variables to set the SID, the name of the PDB, and
so on.  The documentation describes the other variables that are available.<br>
Follow the instructions in the documentation to set the <code>sys</code> password.</p>
<p>You should also create a service to make the database available within the Kubernetes cluster with
a well known name.  Here is an example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tns</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">port</span>: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">oracle-db</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">sessionAffinity</span>: <span style="color:#ae81ff">None</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">ClusterIP</span></span></span></code></pre></div>
<p>In the previous example, the database would be visible in the cluster using the address
<code>oracle-db.default.svc.cluster.local:1521/devpdb.k8s</code>.</p>
<p>When you run the database in the Kubernetes cluster, you will probably want to also
run RCU from a pod inside your network, though this
is not strictly necessary.  You could create a <code>NodePort</code> to expose your database outside
the Kubernetes cluster and run RCU on another machine with access to the cluster.</p>
<h4 id="running-the-database-outside-kubernetes">Running the database outside Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If you wish to run the database outside Kubernetes, you need to create a way for containers
running in pods in Kubernetes to see the database.  This can be done by defining a
Kubernetes Service with no selector and associating it with an endpoint definition, as shown
in the following example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">name</span>: <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">type</span>: <span style="color:#ae81ff">ClusterIP</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span> - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Endpoints</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">name</span>: <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">subsets</span>:
</span></span><span style="display:flex;"><span> - <span style="color:#f92672">addresses</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#f92672">ip</span>: <span style="color:#ae81ff">129.123.1.4</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">1521</span></span></span></code></pre></div>
<p>This creates a DNS name <code>database</code> in the current namespace, or<code>default</code> if no namespace is
specified, as in the previous example. In this example, the fully qualified name would be
<code>database.default.svc.cluster.local</code>.  The second part is the namespace.
If you looked up the <code>ClusterIP</code> for such a service, it would have an IP address on the overlay
network, that is the network inside the Kubernetes cluster.  If you are using flannel,
for example, the address might be something like <code>10.0.1.25</code>.  Note that this is usually a
non-routed address.</p>
<p>From a container in a pod running in Kubernetes, you can make a connection to that address
and port <code>1521</code>.  Kubernetes will route the connection to the address provided in the
endpoint definition, in this example, <code>129.123.1.4:1521</code>.  This IP address (or name) is
resolved from the point of view of the Kubernetes Node&rsquo;s IP stack, not the overlay network
inside the Kubernetes cluster.  Note that this is a &ldquo;real&rdquo; routed IP address.</p>
<p>When you create your data sources, you would use the internal address, for example,
<code>database:1521/some.service</code>.</p>
<p>Because your database is externally accessible, you can run RCU in the normal way, from any
machine on your network.</p>
<h3 id="running-the-repository-creation-utility-to-set-up-your-database-schema">Running the Repository Creation Utility to set up your database schema<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>If you want to run RCU from a pod inside the Kubernetes cluster, you can use the container
image that you built earlier as a &ldquo;service&rdquo; pod to run RCU.  To do this, start up a
pod using that image as follows:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl run rcu --generator<span style="color:#f92672">=</span>run-pod/v1 --image container-registry.oracle.com/middleware/fmw_infrastructure:12.2.1.4 -- sleep infinity</span></span></code></pre></div>
<p>This will create a Kubernetes Deployment called <code>rcu</code> containing a pod running a container
created from the <code>container-registry.oracle.com/middleware/fmw_infrastructure:12.2.1.4</code> image which will just run
<code>sleep infinity</code>, which essentially creates a pod that we can &ldquo;exec&rdquo; into and use to run whatever
commands we need to run.</p>
<p>To get inside this container and run commands, use this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl exec -ti rcu /bin/bash</span></span></code></pre></div>
<p>When you are finished with this pod, you can remove it with this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl delete pod rcu</span></span></code></pre></div>

<details open class="box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>You can use the same approach to get a temporary pod to run other utilities
like WLST.</p>
  </div>
</details>
<h4 id="creating-schemas">Creating schemas<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>Inside this pod, you can use the following command to run RCU in command-line (no GUI) mode
to create your FMW schemas.  You will need to provide the right prefix and connect string.
You will be prompted to enter the password for the <code>sys</code> user, and then the password to use
for the regular schema users:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /u01/oracle/oracle_common/bin/rcu <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -silent <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -createRepository <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -databaseType ORACLE <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -connectString oracle-db.default:1521/devpdb.k8s <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -dbUser sys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -dbRole sysdba <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -useSamePasswordForAllSchemaUsers true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -selectDependentsForComponents true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -schemaPrefix FMW1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component MDS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU_APPEND <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU_VIEWER <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component OPSS  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component WLS  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component STB</span></span></code></pre></div>
<p>You need to make sure that you maintain the association between the database schemas and the
matching domain just like you did in a non-Kubernetes environment.  There is no specific
functionality provided to help with this.  We recommend that you consider making the RCU
prefix (value of the <code>schemaPrefix</code> argument) the same as your <code>domainUID</code> to help maintain this association.</p>
<h4 id="dropping-schemas">Dropping schemas<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If you want to drop the schema, you can use a command like this:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ /u01/oracle/oracle_common/bin/rcu <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -silent <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -dropRepository <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -databaseType ORACLE <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -connectString oracle-db.default:1521/devpdb.k8s <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -dbUser sys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -dbRole sysdba <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -selectDependentsForComponents true <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -schemaPrefix FMW1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component MDS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU_APPEND <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component IAU_VIEWER <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component OPSS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component WLS <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  -component STB</span></span></code></pre></div>
<p>Again, you will need to set the right prefix and connection string, and you will be prompted
to enter the <code>sys</code> user password.</p>
<h3 id="create-a-kubernetes-secret-with-the-rcu-credentials">Create a Kubernetes Secret with the RCU credentials<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>You also need to create a Kubernetes Secret containing the credentials for the database schemas.
When you create your domain using the following sample, it will obtain the RCU credentials
from this secret.</p>
<p>We provide a 

<a href="https://github.com/oracle/weblogic-kubernetes-operator/tree/main/kubernetes/samples/scripts/create-rcu-credentials/README.md"
   
   
target="_blank" rel="noopener noreferrer"
>
sample
</a>

that demonstrates how to create the secret.  The schema owner user name required will be the
<code>schemaPrefix</code> value followed by an underscore and a component name, such as <code>FMW1_STB</code>.  The schema owner
password will be the password you provided for regular schema users during RCU creation.</p>
<h3 id="creating-an-fmw-infrastructure-domain">Creating an FMW Infrastructure domain<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Now that you have your images and you have created your RCU schemas, you are ready
to create your domain.</p>
<h3 id="patching-the-fmw-infrastructure-image">Patching the FMW Infrastructure image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>There are two kinds of patches that can be applied to the FMW Infrastructure binaries:</p>
<ul>
<li>Patches which are eligible for Zero Downtime Patching (ZDP), meaning that
they can be applied with a rolling restart.</li>
<li>Non-ZDP eligible compliant patches, meaning that the domain must be shut down
and restarted.</li>
</ul>
<p>You can find out whether or not a patch is eligible for Zero Downtime Patching
by consulting the README file that accompanies the patch.</p>
<p>If you wish to apply a ZDP compliant patch which can be applied with a rolling
restart, after you have patched the FMW Infrastructure image as shown in this


<a href="https://github.com/oracle/docker-images/tree/master/OracleFMWInfrastructure/samples/12213-patch"
   
   
target="_blank" rel="noopener noreferrer"
>
sample
</a>
,
you can edit the domain custom resource with the name of the new image and
the operator will initiate a rolling restart of the domain.</p>
<p>If you wish to apply a non-ZDP compliant patch to the FMW Infrastructure binary image,
you must shut down the entire domain before applying the patch. Please see the documentation on


<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-lifecycle/"
   
   >
domain lifecycle operations
</a>

for more information.</p>
<p>An example of a non-ZDP compliant patch is one that includes a schema change
that can not be applied dynamically.</p>
<h3 id="additional-considerations-for-coherence">Additional considerations for Coherence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>If you are running a domain which contains Coherence, please refer to


<a href="https://oracle.github.io/weblogic-kubernetes-operator/faq/coherence-requirements/"
   
   >
Coherence requirements
</a>

for more information.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">


<a id="logo" href="https://oracle.github.io/weblogic-kubernetes-operator/">
  <img src="https://oracle.github.io/weblogic-kubernetes-operator//images/logo.png" height="90"><br/>
  WebLogic Kubernetes Operator
</a>

        </div>
        <search><form action="https://oracle.github.io/weblogic-kubernetes-operator/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><b> </b>Quick Start</a><ul id="R-subsections-d63193e927818b6cb77d9c791ea48a61" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><b> </b>Introduction</a><ul id="R-subsections-e1ed3a04f1f57a27be4a8d0eb274be18" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><b> </b>Manage operators</a><ul id="R-subsections-7d4cf64999b86ce8197c0bc43769472c" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html">Manage domains</a><ul id="R-subsections-45a55625d0c34b621eb1935c75fae249" class="collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/manage-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/manage-domains/index.html">About WebLogic domains</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/index.html">Choose a domain home source type</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-resource/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-resource/index.html"><b> </b>Domain and Cluster resources</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/upgrade-domain-resource/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/upgrade-domain-resource/index.html"><b> </b>Upgrade Domain resource</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/prepare/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/prepare/index.html">Prepare to run a domain</a></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/major-weblogic-version-upgrade/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/major-weblogic-version-upgrade/index.html"><b> </b>Upgrade managed domains</a><ul id="R-subsections-ccbca7935ed481eeab6222c998578048" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/index.html"><b> </b>Domain on Persistent Volume (PV)</a><ul id="R-subsections-d40ed8eea8326dbcd46326f7659b3e4f" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/model-in-image/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/model-in-image/index.html"><b> </b>Model in Image</a><ul id="R-subsections-d9db9d9e38880e56d7ba5514a8527a97" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/configoverrides/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/configoverrides/index.html"><b> </b>Configuration overrides</a></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/persistent-storage/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/persistent-storage/index.html"><b> </b>Persistent storage</a><ul id="R-subsections-661be2f02fd0ae2ad3377779776a4545" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/accessing-the-domain/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/accessing-the-domain/index.html"><b> </b>Access and monitor domains</a><ul id="R-subsections-5f509e3b856bccb56052229a523c07b3" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-lifecycle/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-lifecycle/index.html"><b> </b>Domain life cycle</a><ul id="R-subsections-47783ab45f0ad76897c1eb1a21f9e6e7" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/cicd/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/cicd/index.html">CI/CD considerations</a><ul id="R-subsections-8802c993ce14e9bb7903113fc1be4858" class="collapsible-menu"></ul></li>
            <li class="active " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/managing-fmw-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/managing-fmw-domains/index.html">Manage FMW Infrastructure domains</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/aks/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/aks/index.html">Azure Kubernetes Service (AKS)</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/debugging/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/debugging/index.html"><b> </b>Domain debugging</a></li></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><b> </b>WebLogic images</a><ul id="R-subsections-b3440c9f2ce961fe2579290479f05e53" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><b> </b>Samples</a><ul id="R-subsections-88c2b1e6419b221ce89c4be4a8ae2a6b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><b> </b>Developer Guide</a><ul id="R-subsections-6d5a8d333894e1a8a4ced31c7a69170c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><b> </b>Reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><b> </b>Security</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html">Frequently asked questions</a><ul id="R-subsections-24e4fc446616bf2bbeac7b1dba804bb8" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html">Deprecated functionality</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html">Known limitations</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer">

<p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-kubernetes-operator"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #weblogic</a></p>
</div>
      </div>
    </aside>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/perfect-scrollbar/perfect-scrollbar.min.js?1767152691" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/theme.min.js?1767152691" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
