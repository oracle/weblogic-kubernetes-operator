<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.153.0">
    <meta name="generator" content="Relearn 8.3.0">
    <meta name="description" content="Help for common installing and upgrading mistakes.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Common mistakes and solutions :: WebLogic Kubernetes Operator">
    <meta name="twitter:description" content="Help for common installing and upgrading mistakes.">
    <meta property="og:url" content="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html">
    <meta property="og:site_name" content="WebLogic Kubernetes Operator">
    <meta property="og:title" content="Common mistakes and solutions :: WebLogic Kubernetes Operator">
    <meta property="og:description" content="Help for common installing and upgrading mistakes.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Manage operators">
    <meta property="article:published_time" content="2019-02-23T17:08:43-05:00">
    <meta property="article:modified_time" content="2019-02-23T17:08:43-05:00">
    <meta itemprop="name" content="Common mistakes and solutions :: WebLogic Kubernetes Operator">
    <meta itemprop="description" content="Help for common installing and upgrading mistakes.">
    <meta itemprop="datePublished" content="2019-02-23T17:08:43-05:00">
    <meta itemprop="dateModified" content="2019-02-23T17:08:43-05:00">
    <meta itemprop="wordCount" content="1267">
    <title>Common mistakes and solutions :: WebLogic Kubernetes Operator</title>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/images/logo.png?1766893950" rel="icon" type="image/png">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/auto-complete/auto-complete.min.css?1766893950" rel="stylesheet">
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/auto-complete/auto-complete.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search-lunr.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search.min.js?1766893950" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="https://oracle.github.io/weblogic-kubernetes-operator/searchindex.en.js?1766893950";
    </script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.stemmer.support.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.multi.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.en.min.js?1766893950" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1766893950" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1766893950" rel="stylesheet"></noscript>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/perfect-scrollbar/perfect-scrollbar.min.css?1766893950" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/theme.min.css?1766893950" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/format-html.min.css?1766893950" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/managing-operators\/common-mistakes\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/weblogic-kubernetes-operator';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'learn' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#namespace-related">Namespace related</a>
      <ul>
        <li><a href="#changes-in-default-helm-chart-values-from-weblogic-kubernetes-operator-version-34-to-40">Changes in default Helm chart values from WebLogic Kubernetes Operator version 3.4 to 4.0</a></li>
        <li><a href="#deleting-and-recreating-a-namespace-that-an-operator-manages-without-informing-the-operator">Deleting and recreating a namespace that an operator manages without informing the operator</a></li>
        <li><a href="#forgetting-to-configure-the-operator-to-monitor-a-namespace">Forgetting to configure the operator to monitor a namespace</a></li>
        <li><a href="#installing-the-operator-a-second-time-into-the-same-namespace">Installing the operator a second time into the same namespace</a></li>
        <li><a href="#installing-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Installing an operator and having it manage a domain namespace that another operator is already managing</a></li>
        <li><a href="#upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Upgrading an operator and having it manage a domain namespace that another operator is already managing</a></li>
        <li><a href="#installing-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Installing an operator and having it manage a domain namespace that doesn&rsquo;t exist</a></li>
        <li><a href="#upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Upgrading an operator and having it manage a domain namespace that doesn&rsquo;t exist</a></li>
      </ul>
    </li>
    <li><a href="#rest-port-conflict">REST port conflict</a>
      <ul>
        <li><a href="#installing-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Installing an operator and assigning it the same external REST port number as another operator</a></li>
        <li><a href="#upgrading-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Upgrading an operator and assigning it the same external REST port number as another operator</a></li>
      </ul>
    </li>
    <li><a href="#missing-service-account">Missing service account</a>
      <ul>
        <li><a href="#installing-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Installing an operator and assigning it a service account that doesn&rsquo;t exist</a></li>
        <li><a href="#upgrading-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Upgrading an operator and assigning it a service account that doesn&rsquo;t exist</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><span itemprop="name">WebLogic Kubernetes Operator</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><span itemprop="name">Manage operators</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Common mistakes and solutions</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/k8s-setup/index.html" title="Set up Kubernetes (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/index.html" title="Troubleshooting (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable managing-operators" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>



<h1 id="common-mistakes-and-solutions">Common mistakes and solutions</h1>



<h3 id="contents">Contents</h3>
<div class="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#namespace-related">Namespace related</a>
      <ul>
        <li><a href="#changes-in-default-helm-chart-values-from-weblogic-kubernetes-operator-version-34-to-40">Changes in default Helm chart values from WebLogic Kubernetes Operator version 3.4 to 4.0</a></li>
        <li><a href="#deleting-and-recreating-a-namespace-that-an-operator-manages-without-informing-the-operator">Deleting and recreating a namespace that an operator manages without informing the operator</a></li>
        <li><a href="#forgetting-to-configure-the-operator-to-monitor-a-namespace">Forgetting to configure the operator to monitor a namespace</a></li>
        <li><a href="#installing-the-operator-a-second-time-into-the-same-namespace">Installing the operator a second time into the same namespace</a></li>
        <li><a href="#installing-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Installing an operator and having it manage a domain namespace that another operator is already managing</a></li>
        <li><a href="#upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Upgrading an operator and having it manage a domain namespace that another operator is already managing</a></li>
        <li><a href="#installing-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Installing an operator and having it manage a domain namespace that doesn&rsquo;t exist</a></li>
        <li><a href="#upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Upgrading an operator and having it manage a domain namespace that doesn&rsquo;t exist</a></li>
      </ul>
    </li>
    <li><a href="#rest-port-conflict">REST port conflict</a>
      <ul>
        <li><a href="#installing-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Installing an operator and assigning it the same external REST port number as another operator</a></li>
        <li><a href="#upgrading-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Upgrading an operator and assigning it the same external REST port number as another operator</a></li>
      </ul>
    </li>
    <li><a href="#missing-service-account">Missing service account</a>
      <ul>
        <li><a href="#installing-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Installing an operator and assigning it a service account that doesn&rsquo;t exist</a></li>
        <li><a href="#upgrading-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Upgrading an operator and assigning it a service account that doesn&rsquo;t exist</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
<h3 id="namespace-related">Namespace related<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Common namespace-related mistakes.</p>
<h4 id="changes-in-default-helm-chart-values-from-weblogic-kubernetes-operator-version-34-to-40">Changes in default Helm chart values from WebLogic Kubernetes Operator version 3.4 to 4.0<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The default for the <code>domainNamespaceSelectionStrategy</code> Helm chart value, which specifies how the operator will select the namespaces that it will manage, was changed between version 3.4 and 4.0.
In version 3.4, the default was <code>List</code> and in version 4.0, the default is <code>LabelSelector</code>. This means that the operator used to default to managing the set of namespaces listed in the <code>domainNamespaces</code> Helm chart value and
the updated default is that the operator searches for namespaces that have the label specified in the <code>domainNamespaceLabelSelector</code> Helm chart value, which defaults to <code>weblogic-operator=enabled</code>.</p>
<p>When upgrading the operator from 3.4 to 4.0, you can use the <code>--reuse-values</code> option, such as <code>helm upgrade --reuse-values</code>, to install the upgraded chart with the values that were used during the original installation, including default values.
If you do not use <code>--reuse-values</code>, then the upgraded chart will be installed with the updated default values, which could result in an unanticipated change in the set of namespaces that the operator is managing. Alternatively, you can also set
the value of <code>domainNamespaceSelectionStragegy</code> (or any other value) using a values file or the <code>--set</code> option.</p>
<h4 id="deleting-and-recreating-a-namespace-that-an-operator-manages-without-informing-the-operator">Deleting and recreating a namespace that an operator manages without informing the operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If you create a new domain in a namespace that is deleted and recreated, the domain does not start up until you notify the operator.
For more details about the problem and solutions, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/#recreate-a-previously-deleted-kubernetes-namespace-with-a-running-operator"
   
   >
Namespace management
</a>
.</p>
<h4 id="forgetting-to-configure-the-operator-to-monitor-a-namespace">Forgetting to configure the operator to monitor a namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If it appears that an operator is not managing a domain resource, for example:</p>
<ul>
<li>A domain YAML file is deployed and no introspector or WebLogic Server pods start.</li>
<li>The operator log contains no mention of the domain.</li>
<li>No events are generated for the domain in the domain&rsquo;s namespace.</li>
<li>The domain resource&rsquo;s <code>domain.status</code> fields do not contain updated information about the status of the domain.
Then check to make sure that the Domain&rsquo;s namespace has been set up to be monitored by an operator.</li>
</ul>
<p>For more information, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/#ensuring-the-operator-has-permission-to-manage-a-namespace"
   
   >
Namespace management
</a>
.</p>
<h4 id="installing-the-operator-a-second-time-into-the-same-namespace">Installing the operator a second time into the same namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>A new <code>FAILED</code> Helm release is created.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install --no-hooks --name op2 --namespace myuser-op-ns --values custom-values.yaml weblogic-operator/weblogic-operator</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: release op2 failed: secrets &#34;weblogic-operator-secrets&#34; already exists</code></pre></div>
<p>Both the previous and new release own the resources created by the previous operator.</p>
<ul>
<li>You can&rsquo;t modify it to change the namespace (because <code>helm upgrade</code> does not let you change the namespace).</li>
<li>You can&rsquo;t fix it by deleting this release because it removes your previous operator&rsquo;s resources.</li>
<li>You can&rsquo;t fix it by rolling back this release because it is not in the <code>DEPLOYED</code> state.</li>
<li>You can&rsquo;t fix it by deleting the previous release because it removes the operator&rsquo;s resources too.</li>
<li>All you can do is delete both operator releases and reinstall the original operator.</li>
</ul>
<p>See 

<a href="https://github.com/helm/helm/issues/2349"
   
   
target="_blank" rel="noopener noreferrer"
>
https://github.com/helm/helm/issues/2349
</a>
.</p>
<h4 id="installing-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Installing an operator and having it manage a domain namespace that another operator is already managing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>A new <code>FAILED</code> Helm release is created.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install --no-hooks --name op2 --namespace myuser-op2-ns --values custom-values.yaml weblogic-operator/weblogic-operator</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: release op2 failed: rolebindings.rbac.authorization.k8s.io &#34;weblogic-operator-rolebinding-namespace&#34; already exists</code></pre></div>
<p>To recover:</p>
<ul>
<li><code>helm delete --purge</code> the failed release.
<ul>
<li><strong>NOTE</strong>: This deletes the role binding in the domain namespace that was created by the first operator release, to give the operator access to the domain namespace.</li>
</ul>
</li>
<li><code>helm upgrade &lt;old op release&gt; weblogic-operator/weblogic-operator --values &lt;old op custom-values.yaml&gt;</code>
<ul>
<li>This recreates the role binding.</li>
<li>There might be intermittent failures in the operator for the period of time when the role binding was deleted.</li>
</ul>
</li>
</ul>
<h4 id="upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-another-operator-is-already-managing">Upgrading an operator and having it manage a domain namespace that another operator is already managing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The <code>helm upgrade</code> succeeds, and silently adopts the resources the first operator&rsquo;s Helm chart created in the domain namespace (for example, <code>rolebinding</code>), and, if you also instructed it to stop managing another domain namespace, then it abandons the role binding it created in that namespace.</p>
<p>For example, if you delete this release, then the first operator will end up without the role binding it needs. The problem is that you don&rsquo;t get a warning, so you don&rsquo;t know that there&rsquo;s a problem to fix.</p>
<ul>
<li>This can be fixed by just upgrading the Helm release.</li>
<li>This may also be fixed by rolling back the Helm release.</li>
</ul>
<h4 id="installing-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Installing an operator and having it manage a domain namespace that doesn&rsquo;t exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>A new <code>FAILED</code> Helm release is created.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install --no-hooks --name op2 --namespace myuser-op2-ns --values o.yaml weblogic-operator/weblogic-operator</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: release op2 failed: namespaces &#34;myuser-d2-ns&#34; not found</code></pre></div>
<p>To recover:</p>
<ul>
<li><code>helm delete --purge</code> the failed release.</li>
<li>Create the domain namespace.</li>
<li><code>helm install</code> again.</li>
</ul>
<h4 id="upgrading-an-operator-and-having-it-manage-a-domain-namespace-that-doesnt-exist">Upgrading an operator and having it manage a domain namespace that doesn&rsquo;t exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The <code>helm upgrade</code> fails and moves the release to the <code>FAILED</code> state.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm upgrade myuser-op weblogic-operator/weblogic-operator --values o.yaml --no-hooks</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: UPGRADE FAILED: failed to create resource: namespaces &#34;myuser-d2-ns&#34; not found</code></pre></div>
<p>To recover:</p>
<ul>
<li><code>helm rollback</code>.</li>
<li>Create the domain namespace.</li>
<li><code>helm upgrade</code> again.</li>
</ul>
<h3 id="rest-port-conflict">REST port conflict<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>REST port conflict-related mistakes.</p>
<h4 id="installing-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Installing an operator and assigning it the same external REST port number as another operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>A new <code>FAILED</code> Helm release is created.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install --no-hooks --name op2 --namespace myuser-op2-ns --values o.yaml weblogic-operator/weblogic-operator</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: release op2 failed: Service &#34;external-weblogic-operator-svc&#34; is invalid: spec.ports[0].nodePort: Invalid value: 31023: provided port is already allocated</code></pre></div>
<p>To recover:</p>
<ul>
<li>$ <code>helm delete --purge</code> the failed release.</li>
<li>Change the port number and <code>helm install</code> the second operator again.</li>
</ul>
<h4 id="upgrading-an-operator-and-assigning-it-the-same-external-rest-port-number-as-another-operator">Upgrading an operator and assigning it the same external REST port number as another operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The <code>helm upgrade</code> fails and moves the release to the <code>FAILED</code> state.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm upgrade --no-hooks --values o23.yaml op2 weblogic-operator/weblogic-operator --wait</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Error: UPGRADE FAILED: Service &#34;external-weblogic-operator-svc&#34; is invalid: spec.ports[0].nodePort: Invalid value: 31023: provided port is already allocated</code></pre></div>
<ul>
<li>You can fix this by upgrading the Helm release (to fix the port number).</li>
<li>You can also fix this by rolling back the Helm release.</li>
</ul>
<h3 id="missing-service-account">Missing service account<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Missing service account-related mistakes.</p>
<h4 id="installing-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Installing an operator and assigning it a service account that doesn&rsquo;t exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The following <code>helm install</code> command fails because it tries to install an operator release with a non-existing service account <code>op2-sa</code>.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ helm install op2 weblogic-operator/weblogic-operator --namespace myuser-op2-ns --set serviceAccount<span style="color:#f92672">=</span>op2-sa --wait --no-hooks</span></span></code></pre></div>
<p>The output contains the following error message.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>ServiceAccount op2-sa not found in namespace myuser-op2-ns</code></pre></div>
<p>To recover:</p>
<ul>
<li>Create the service account.</li>
<li><code>helm install</code> again.</li>
</ul>
<h4 id="upgrading-an-operator-and-assigning-it-a-service-account-that-doesnt-exist">Upgrading an operator and assigning it a service account that doesn&rsquo;t exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>The <code>helm upgrade</code> with a non-existing service account fails with the same error message as mentioned in the previous section, and the existing operator deployment stays unchanged.</p>
<p>To recover:</p>
<ul>
<li>Create the service account.</li>
<li><code>helm upgrade</code> again.</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">


<a id="logo" href="https://oracle.github.io/weblogic-kubernetes-operator/">
  <img src="https://oracle.github.io/weblogic-kubernetes-operator//images/logo.png" height="90"><br/>
  WebLogic Kubernetes Operator
</a>

        </div>
        <search><form action="https://oracle.github.io/weblogic-kubernetes-operator/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><b> </b>Quick Start</a><ul id="R-subsections-d63193e927818b6cb77d9c791ea48a61" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><b> </b>Introduction</a><ul id="R-subsections-e1ed3a04f1f57a27be4a8d0eb274be18" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><b> </b>Manage operators</a><ul id="R-subsections-7d4cf64999b86ce8197c0bc43769472c" class="collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/overview/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/overview/index.html">Overview</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/preparation/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/preparation/index.html">Prepare for installation</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/index.html">Installation and upgrade</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html">Upgrade operator from version 3.x to 4.x</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/using-helm/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/using-helm/index.html">Configuration reference</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/index.html">Namespace management</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/service-accounts/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/service-accounts/index.html">Service accounts</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/rbac/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/rbac/index.html">RBAC</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/the-rest-api/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/the-rest-api/index.html">REST services</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/k8s-setup/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/k8s-setup/index.html">Set up Kubernetes</a></li>
            <li class="active " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html">Common mistakes and solutions</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/index.html">Troubleshooting</a></li></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html">Manage domains</a><ul id="R-subsections-45a55625d0c34b621eb1935c75fae249" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><b> </b>WebLogic images</a><ul id="R-subsections-b3440c9f2ce961fe2579290479f05e53" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><b> </b>Samples</a><ul id="R-subsections-88c2b1e6419b221ce89c4be4a8ae2a6b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><b> </b>Developer Guide</a><ul id="R-subsections-6d5a8d333894e1a8a4ced31c7a69170c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><b> </b>Reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><b> </b>Security</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html">Frequently asked questions</a><ul id="R-subsections-24e4fc446616bf2bbeac7b1dba804bb8" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html">Deprecated functionality</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html">Known limitations</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer">

<p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-kubernetes-operator"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #weblogic</a></p>
</div>
      </div>
    </aside>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/perfect-scrollbar/perfect-scrollbar.min.js?1766893950" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/theme.min.js?1766893950" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
