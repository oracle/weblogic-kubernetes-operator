<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.153.0">
    <meta name="generator" content="Relearn 8.3.0">
    <meta name="description" content="Conversion webhook for upgrading the domain resource schema.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Upgrade operator from version 3.x to 4.x :: WebLogic Kubernetes Operator">
    <meta name="twitter:description" content="Conversion webhook for upgrading the domain resource schema.">
    <meta property="og:url" content="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html">
    <meta property="og:site_name" content="WebLogic Kubernetes Operator">
    <meta property="og:title" content="Upgrade operator from version 3.x to 4.x :: WebLogic Kubernetes Operator">
    <meta property="og:description" content="Conversion webhook for upgrading the domain resource schema.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Manage operators">
    <meta property="article:published_time" content="2019-02-23T16:47:21-05:00">
    <meta property="article:modified_time" content="2019-02-23T16:47:21-05:00">
    <meta itemprop="name" content="Upgrade operator from version 3.x to 4.x :: WebLogic Kubernetes Operator">
    <meta itemprop="description" content="Conversion webhook for upgrading the domain resource schema.">
    <meta itemprop="datePublished" content="2019-02-23T16:47:21-05:00">
    <meta itemprop="dateModified" content="2019-02-23T16:47:21-05:00">
    <meta itemprop="wordCount" content="1365">
    <title>Upgrade operator from version 3.x to 4.x :: WebLogic Kubernetes Operator</title>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/images/logo.png?1766547754" rel="icon" type="image/png">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/auto-complete/auto-complete.min.css?1766547754" rel="stylesheet">
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/auto-complete/auto-complete.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search-lunr.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search.min.js?1766547754" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="https://oracle.github.io/weblogic-kubernetes-operator/searchindex.en.js?1766547754";
    </script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.stemmer.support.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.multi.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.en.min.js?1766547754" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1766547754" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1766547754" rel="stylesheet"></noscript>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/perfect-scrollbar/perfect-scrollbar.min.css?1766547754" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/theme.min.css?1766547754" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/format-html.min.css?1766547754" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/managing-operators\/conversion-webhook\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/weblogic-kubernetes-operator';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'learn' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#conversion-webhook-components">Conversion webhook components</a></li>
    <li><a href="#install-the-conversion-webhook">Install the conversion webhook</a></li>
    <li><a href="#upgrade-the-conversion-webhook">Upgrade the conversion webhook</a></li>
    <li><a href="#uninstall-the-conversion-webhook">Uninstall the conversion webhook</a></li>
    <li><a href="#troubleshooting-the-conversion-webhook">Troubleshooting the conversion webhook</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><span itemprop="name">WebLogic Kubernetes Operator</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><span itemprop="name">Manage operators</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Upgrade operator from version 3.x to 4.x</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/index.html" title="Installation and upgrade (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/using-helm/index.html" title="Configuration reference (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable managing-operators" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>



<h1 id="upgrade-operator-from-version-3x-to-4x">Upgrade operator from version 3.x to 4.x</h1>



<h3 id="contents">Contents</h3>
<div class="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#conversion-webhook-components">Conversion webhook components</a></li>
    <li><a href="#install-the-conversion-webhook">Install the conversion webhook</a></li>
    <li><a href="#upgrade-the-conversion-webhook">Upgrade the conversion webhook</a></li>
    <li><a href="#uninstall-the-conversion-webhook">Uninstall the conversion webhook</a></li>
    <li><a href="#troubleshooting-the-conversion-webhook">Troubleshooting the conversion webhook</a></li>
  </ul>
</nav></div>
<h3 id="introduction">Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>

<details open class="box cstyle notices tip">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-lightbulb"></i> 
    Tip
  </summary>
  <div class="box-content">
<p>The conversion webhook that is described in this document
transparently handles a <code>weblogic.oracle/v8</code> schema domain resource at runtime,
but if you want to use the new fields introduced in the latest <code>weblogic.oracle/v9</code> schema
with a Domain that is currently <code>weblogic.oracle/v8</code>,
then you will need to update its Domain resource file
and potentially create new Cluster resource files.
To simplify this conversion, see


<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/upgrade-domain-resource/#upgrade-the-weblogicoraclev8-schema-domain-resource-manually"
   
   >
manual upgrade command line tool
</a>
.</p>
  </div>
</details>
<p>The Domain CustomResourceDefinition (CRD) in your Kubernetes cluster, which defines the schema of operator managed Domains, has changed significantly in operator version 4.0 from previous operator releases, therefore, we have updated the API version to <code>weblogic.oracle/v9</code>. For example, we have enhanced 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/model-in-image/auxiliary-images/"
   
   >
Auxiliary images
</a>
 in operator version 4.0, and its configuration has changed. Operator 4.0 uses the 

<a href="https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/#webhook-conversion"
   
   
target="_blank" rel="noopener noreferrer"
>
Kubernetes Webhook Conversion
</a>
 strategy and a WebLogic Domain resource conversion webhook to automatically and transparently upgrade domain resources with <code>weblogic.oracle/v8</code> schema to <code>weblogic.oracle/v9</code> schema. With the Webhook conversion strategy, the Kubernetes API server internally invokes an external REST service that pulls out the configuration of the auxiliary images defined in the <code>weblogic.oracle/v8</code> schema domain resource and converts it to the equivalent <code>weblogic.oracle/v9</code> schema configuration. The WebLogic Domain resource conversion webhook is a singleton Deployment in your Kubernetes cluster. It is installed by default when an operator is installed, and uninstalled when any operator is uninstalled, but you can optionally install and uninstall it independently. For details, see 

<a href="#install-the-conversion-webhook"
   
   >
Install the conversion webhook
</a>
 and 

<a href="#uninstall-the-conversion-webhook"
   
   >
Uninstall the conversion webhook
</a>
. For manually upgrading the domain resources with <code>weblogic.oracle/v8</code> schema to <code>weblogic.oracle/v9</code> schema, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/upgrade-domain-resource/"
   
   >
Upgrade Domain resource
</a>
.</p>
<h3 id="conversion-webhook-components">Conversion webhook components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>The following table lists the components of the WebLogic Domain resource conversion webhook and their purpose.</p>
<table>
  <thead>
      <tr>
          <th>Component Type</th>
          <th>Component Name</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Deployment</td>
          <td><code>webLogic-operator-webhook</code></td>
          <td>Manages the runtime Pod of the WebLogic Domain resource conversion webhook.</td>
      </tr>
      <tr>
          <td>Service</td>
          <td><code>webLogic-operator-webhook-svc</code></td>
          <td>The Kubernetes API server uses this service to reach the conversion webhook runtime defined in the WebLogic Domain CRD.</td>
      </tr>
      <tr>
          <td>Secret</td>
          <td><code>webLogic-webhook-secrets</code></td>
          <td>Contains the CA certificate and key used to secure the communication between the Kubernetes API server and the REST endpoint of WebLogic domain resource conversion webhook.</td>
      </tr>
      <tr>
          <td>The <code>spec.conversion</code> stanza in the Domain CRD</td>
          <td></td>
          <td>Used internally by the Kubernetes API server to call an external service when a Domain conversion is required.</td>
      </tr>
  </tbody>
</table>
<p><strong>NOTES</strong>:</p>
<ul>
<li>
<p>The conversion webhook Deployment <code>webLogic-operator-webhook</code> uses and requires the same image as the operator image. You can scale the Deployment by increasing the number of replicas, although this is rarely required.</p>
</li>
<li>
<p>The conversion webhook Deployment sets the <code>spec.conversion.strategy</code> field of the Domain CRD to <code>Webhook</code>. It also adds webhook client configuration details such as service name, namespace, path, port, and the self-signed CA certificate used for authentication.</p>
</li>
</ul>
<h3 id="install-the-conversion-webhook">Install the conversion webhook<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Beginning with  operator version 4.0, when you 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/#install-the-operator"
   
   >
install the operator
</a>
 using the <code>helm install</code> command with the operator Helm chart, by default, it also configures a deployment and supporting resources for the conversion webhook and deploys the conversion webhook in the specified namespace. Note that a webhook is a singleton deployment in the cluster. Therefore, if the webhook is already installed in the cluster and the operator installation version is the same or older, then the operator installation will skip the webhook installation. However, if the operator version is newer, then a new webhook Deployment is created and all webhook traffic for the CRD is redirected to the new webhook.</p>

<details open class="box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p><strong>Security Considerations:</strong>
The <code>helm install</code> step requires cluster-level permissions for listing and reading all Namespaces and Deployments to search for existing conversion webhook deployments. If you cannot grant the cluster-level permissions and have multiple operators deployed, then install the conversion webhook separately and set the Helm configuration value <code>operatorOnly</code> to <code>true</code> in the <code>helm install</code> command to prevent multiple conversion webhook deployments. In addition, the webhook uses a service account that is usually the same service account as an operator running in the same namespace. This service account requires permissions to create and read events in the conversion webhook namespace. For more information, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/rbac/"
   
   >
RBAC
</a>
.</p>
  </div>
</details>

<details open class="box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>Operator version 4.x requires a conversion webhook. The <code>operatorOnly</code> Helm configuration value is an advanced setting and should be used only when a conversion webhook is already installed.</p>
  </div>
</details>
<p>If you want to install <em>only</em> the conversion webhook (and not the operator) in the given namespace, set the Helm configuration value <code>webhookOnly</code> to <code>true</code> in the <code>helm install</code> command. After meeting the 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/preparation/"
   
   >
prerequisite requirements
</a>
, call:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>$ helm install sample-weblogic-conversion-webhook \
  weblogic-operator/weblogic-operator \
  --namespace sample-weblogic-conversion-webhook-ns \
  --set &#34;webhookOnly=true&#34; \
  --wait</code></pre></div>
<p>The previous command creates a Helm release named <code>sample-weblogic-conversion-webhook</code>
in the <code>sample-weblogic-conversion-webhook-ns</code> namespace,
configures a deployment and supporting resources for the conversion webhook,
and deploys the conversion webhook. This command uses the <code>default</code> service account for the <code>sample-weblogic-conversion-webhook-ns</code> namespace.</p>
<p>To check if the conversion webhook is deployed and running,
see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/#check-the-conversion-webhook-deployment"
   
   >
Troubleshooting
</a>
.</p>
<p>To prevent the removal of the conversion webhook during the <code>helm uninstall</code> command of an operator, set the Helm configuration value <code>preserveWebhook</code> to <code>true</code> during the <code>helm install</code> of the operator release.</p>
<p>The following table describes the behavior of different operator <code>Helm</code> chart commands for various Helm configuration values.</p>
<table>
  <thead>
      <tr>
          <th>Helm command with the operator Helm chart</th>
          <th>Helm configuration values</th>
          <th>Behavior</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Helm install</td>
          <td>None specified</td>
          <td>Operator and conversion webhook installed.</td>
      </tr>
      <tr>
          <td>Helm install</td>
          <td><code>webhookOnly=true</code></td>
          <td>Only conversion webhook installed.</td>
      </tr>
      <tr>
          <td>Helm install</td>
          <td><code>operatorOnly=true</code></td>
          <td>Only operator installed.</td>
      </tr>
      <tr>
          <td>Helm install</td>
          <td><code>preserveWebhook=true</code></td>
          <td>Operator and webhook installed and a future uninstall will not remove the webhook.</td>
      </tr>
      <tr>
          <td>Helm uninstall</td>
          <td></td>
          <td>Operator and webhook deployment uninstalled.</td>
      </tr>
      <tr>
          <td>Helm uninstall with <code>preserveWebhook=true</code> set during <code>helm install</code></td>
          <td></td>
          <td>Operator deployment uninstalled and webhook deployment preserved.</td>
      </tr>
  </tbody>
</table>
<p><strong>NOTE</strong>:
A webhook install is skipped if there&rsquo;s already a webhook deployment at the same or newer version. The <code>helm install</code> step requires cluster-level permissions to search for existing conversion webhook deployments in all namespaces.</p>
<h3 id="upgrade-the-conversion-webhook">Upgrade the conversion webhook<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>We support having exactly one installation of the webhook and having one or more installations of the operator. To have more than one installation of the operator, you would need to install a Helm release with just the webhook and then separately install multiple Helm releases with just the operator. The conversion webhook should be updated to at least match the version of the most recent operator in the cluster.</p>
<p>To upgrade the conversion webhook only, you must have <em>first</em> installed a Helm release with the webhook only, use the <code>--set webhookOnly=true</code> option, then you can update that release.</p>
<p>The following example installs the conversion webhook only (at the specified version), and then upgrades it (to a later, specified version).</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>kubectl create namespace &lt;your-namespace&gt;

helm repo add weblogic-helm-repository https://oracle.github.io/weblogic-kubernetes-operator/charts --force-update

helm install &lt;your-release-name&gt; weblogic-helm-repository/weblogic-operator --namespace &lt;your-namespace&gt; --set webhookOnly=true --version &lt;selected-version&gt;</code></pre></div>
<p>The first two steps create the namespace and configure Helm with the chart repository.</p>
<p>The final step installs the webhook specifying that the install should be for the webhook only and at a specific version of the product.</p>
<p>To upgrade to a later version of the webhook:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>helm upgrade &lt;your-release-name&gt; weblogic-helm-repository/weblogic-operator --namespace &lt;your-namespace&gt; --version &lt;selected-new-version&gt;</code></pre></div>
<h3 id="uninstall-the-conversion-webhook">Uninstall the conversion webhook<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>

<details open class="box cstyle notices warning">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-triangle"></i> 
    Warning
  </summary>
  <div class="box-content">
<p>If you are deploying Domains using <code>weblogic.oracle/v8</code> or older schema and either you have multiple operators deployed or you want to create Domains without the operator deployed, then you may not want to uninstall the webhook. If the conversion webhook runtime is not available under these conditions, then you will see a <code>conversion webhook not found</code> error. To avoid this error, reinstall the webhook and, in the future, use the <code>preserveWebhook=true</code> Helm configuration value when installing an operator.</p>
  </div>
</details>
<p>When you 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/#uninstall-the-operator"
   
   >
uninstall the operator
</a>
 using the <code>helm uninstall</code> command, it removes the conversion webhook
associated with the release and its resources from the Kubernetes cluster. However, if you <em>only</em> installed the conversion webhook using the <code>webhookOnly=true</code> Helm configuration value, then run the <code>helm uninstall</code>
command separately to remove the conversion webhook associated with the release and its resources.</p>
<p>For example, assuming the Helm release name for the conversion webhook is <code>sample-weblogic-conversion-webhook</code>,
and the conversion webhook namespace is <code>sample-weblogic-conversion-webhook-ns</code>:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ helm uninstall sample-weblogic-conversion-webhook -n sample-weblogic-conversion-webhook-ns</span></span></code></pre></div>
<p>This command deletes the conversion webhook Deployment (<code>weblogic-operator-webhook</code>) and it also deletes the conversion resources, such as service and Secrets.</p>
<h3 id="troubleshooting-the-conversion-webhook">Troubleshooting the conversion webhook<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>See 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/#troubleshooting-the-conversion-webhook"
   
   >
Troubleshooting the conversion webhook
</a>
.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">


<a id="logo" href="https://oracle.github.io/weblogic-kubernetes-operator/">
  <img src="https://oracle.github.io/weblogic-kubernetes-operator//images/logo.png" height="90"><br/>
  WebLogic Kubernetes Operator
</a>

        </div>
        <search><form action="https://oracle.github.io/weblogic-kubernetes-operator/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><b> </b>Quick Start</a><ul id="R-subsections-d63193e927818b6cb77d9c791ea48a61" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><b> </b>Introduction</a><ul id="R-subsections-e1ed3a04f1f57a27be4a8d0eb274be18" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><b> </b>Manage operators</a><ul id="R-subsections-7d4cf64999b86ce8197c0bc43769472c" class="collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/overview/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/overview/index.html">Overview</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/preparation/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/preparation/index.html">Prepare for installation</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/installation/index.html">Installation and upgrade</a></li>
            <li class="active " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/conversion-webhook/index.html">Upgrade operator from version 3.x to 4.x</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/using-helm/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/using-helm/index.html">Configuration reference</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/namespace-management/index.html">Namespace management</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/service-accounts/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/service-accounts/index.html">Service accounts</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/rbac/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/rbac/index.html">RBAC</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/the-rest-api/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/the-rest-api/index.html">REST services</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/k8s-setup/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/k8s-setup/index.html">Set up Kubernetes</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/common-mistakes/index.html">Common mistakes and solutions</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/troubleshooting/index.html">Troubleshooting</a></li></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html">Manage domains</a><ul id="R-subsections-45a55625d0c34b621eb1935c75fae249" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><b> </b>WebLogic images</a><ul id="R-subsections-b3440c9f2ce961fe2579290479f05e53" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><b> </b>Samples</a><ul id="R-subsections-88c2b1e6419b221ce89c4be4a8ae2a6b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><b> </b>Developer Guide</a><ul id="R-subsections-6d5a8d333894e1a8a4ced31c7a69170c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><b> </b>Reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><b> </b>Security</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html">Frequently asked questions</a><ul id="R-subsections-24e4fc446616bf2bbeac7b1dba804bb8" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html">Deprecated functionality</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html">Known limitations</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer">

<p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-kubernetes-operator"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #weblogic</a></p>
</div>
      </div>
    </aside>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/perfect-scrollbar/perfect-scrollbar.min.js?1766547754" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/theme.min.js?1766547754" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
