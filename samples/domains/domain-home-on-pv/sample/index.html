<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.153.0">
    <meta name="generator" content="Relearn 8.3.0">
    <meta name="description" content="Sample for creating a WebLogic domain home on a PV for deploying the generated WebLogic domain.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Sample :: WebLogic Kubernetes Operator">
    <meta name="twitter:description" content="Sample for creating a WebLogic domain home on a PV for deploying the generated WebLogic domain.">
    <meta property="og:url" content="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/sample/index.html">
    <meta property="og:site_name" content="WebLogic Kubernetes Operator">
    <meta property="og:title" content="Sample :: WebLogic Kubernetes Operator">
    <meta property="og:description" content="Sample for creating a WebLogic domain home on a PV for deploying the generated WebLogic domain.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Samples">
    <meta property="article:published_time" content="2019-02-23T17:32:31-05:00">
    <meta property="article:modified_time" content="2019-02-23T17:32:31-05:00">
    <meta itemprop="name" content="Sample :: WebLogic Kubernetes Operator">
    <meta itemprop="description" content="Sample for creating a WebLogic domain home on a PV for deploying the generated WebLogic domain.">
    <meta itemprop="datePublished" content="2019-02-23T17:32:31-05:00">
    <meta itemprop="dateModified" content="2019-02-23T17:32:31-05:00">
    <meta itemprop="wordCount" content="2990">
    <title>Sample :: WebLogic Kubernetes Operator</title>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/images/logo.png?1767757626" rel="icon" type="image/png">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/auto-complete/auto-complete.min.css?1767757626" rel="stylesheet">
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/auto-complete/auto-complete.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search-lunr.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/search.min.js?1767757626" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="https://oracle.github.io/weblogic-kubernetes-operator/searchindex.en.js?1767757626";
    </script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.stemmer.support.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.multi.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/lunr/lunr.en.min.js?1767757626" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1767757626" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://oracle.github.io/weblogic-kubernetes-operator/fonts/fontawesome/css/fontawesome-all.min.css?1767757626" rel="stylesheet"></noscript>
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/perfect-scrollbar/perfect-scrollbar.min.css?1767757626" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/theme.min.css?1767757626" rel="stylesheet">
    <link href="https://oracle.github.io/weblogic-kubernetes-operator/css/format-html.min.css?1767757626" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/samples\/domains\/domain-home-on-pv\/sample\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/weblogic-kubernetes-operator';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'learn' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/sample/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#domain-creation-image">Domain creation image</a></li>
    <li><a href="#deploy-resources---introduction">Deploy resources - Introduction</a>
      <ul>
        <li><a href="#secrets">Secrets</a></li>
        <li><a href="#domain-resource">Domain resource</a></li>
      </ul>
    </li>
    <li><a href="#verify-the-pv-pvc-and-domain">Verify the PV, PVC, and domain</a>
      <ul>
        <li><a href="#verify-the-persistent-volume">Verify the persistent volume</a></li>
        <li><a href="#verify-the-persistent-volume-claim">Verify the persistent volume claim</a></li>
        <li><a href="#verify-the-domain">Verify the domain</a></li>
      </ul>
    </li>
    <li><a href="#verify-the-pods">Verify the pods</a></li>
    <li><a href="#verify-the-services">Verify the services</a></li>
    <li><a href="#invoke-the-web-application">Invoke the web application</a></li>
    <li><a href="#clean-up-resources-and-remove-the-generated-domain-home">Clean up resources and remove the generated domain home</a>
      <ul>
        <li><a href="#remove-the-pvc-and-pv">Remove the PVC and PV</a></li>
        <li><a href="#delete-the-domain-namespace">Delete the domain namespace.</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><span itemprop="name">WebLogic Kubernetes Operator</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><span itemprop="name">Samples</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/index.html"><span itemprop="name">Domains</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/index.html"><span itemprop="name">Domain on PV</span></a><meta itemprop="position" content="4">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Sample</span><meta itemprop="position" content="5"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/build-domain-creation-image/index.html" title="Build domain creation image (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/cleanup/index.html" title="Cleanup (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable samples" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>



<h1 id="sample">Sample</h1>



<h3 id="contents">Contents</h3>
<div class="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#domain-creation-image">Domain creation image</a></li>
    <li><a href="#deploy-resources---introduction">Deploy resources - Introduction</a>
      <ul>
        <li><a href="#secrets">Secrets</a></li>
        <li><a href="#domain-resource">Domain resource</a></li>
      </ul>
    </li>
    <li><a href="#verify-the-pv-pvc-and-domain">Verify the PV, PVC, and domain</a>
      <ul>
        <li><a href="#verify-the-persistent-volume">Verify the persistent volume</a></li>
        <li><a href="#verify-the-persistent-volume-claim">Verify the persistent volume claim</a></li>
        <li><a href="#verify-the-domain">Verify the domain</a></li>
      </ul>
    </li>
    <li><a href="#verify-the-pods">Verify the pods</a></li>
    <li><a href="#verify-the-services">Verify the services</a></li>
    <li><a href="#invoke-the-web-application">Invoke the web application</a></li>
    <li><a href="#clean-up-resources-and-remove-the-generated-domain-home">Clean up resources and remove the generated domain home</a>
      <ul>
        <li><a href="#remove-the-pvc-and-pv">Remove the PVC and PV</a></li>
        <li><a href="#delete-the-domain-namespace">Delete the domain namespace.</a></li>
      </ul>
    </li>
  </ul>
</nav></div>

<details open class="box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p><strong>Before you begin</strong>: Perform the steps in 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/prerequisites/"
   
   >
Prerequisites
</a>
 and then build a Domain on PV <code>domain creation image</code> by completing the steps in 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/build-domain-creation-image/#build-the-domain-creation-image"
   
   >
Build the domain creation image
</a>
.
If you are taking the <code>JRF</code> path through the sample, then substitute <code>JRF</code> for <code>WLS</code> in your image names and directory paths. Also note that the JRF-v1 model YAML file differs from the WLS-v1 YAML file (it contains an additional <code>domainInfo -&gt; RCUDbInfo</code> stanza).</p>
  </div>
</details>
<h3 id="overview">Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>The sample demonstrates setting up a WebLogic domain with a domain home on a Kubernetes PersistentVolume (PV) (<strong>Domain on PV</strong>). This involves:</p>
<ul>
<li>Using the 

<a href="#domain-creation-image"
   
   >
domain creation image
</a>
 that you previously built.</li>
<li>Creating secrets for the domain.</li>
<li>Creating a Domain resource YAML file for the domain that:
<ul>
<li>References your Secrets and a WebLogic image.</li>
<li>References the <code>domain creation image</code> in the <code>spec.configuration.initializeDomainOnPV</code> section for the initial Domain on PV configuration defined using WDT model YAML.</li>
<li>Defines PV and PVC metadata and specifications in the <code>spec.configuration.initializeDomainOnPV</code> section to create a PV and PVC (optional).</li>
</ul>
</li>
</ul>
<p><strong>PV and PVC Notes:</strong></p>
<ul>
<li>The specifications of PersistentVolume and PersistentVolumeClaim defined in the <code>spec.configuration.initializeDomainOnPV</code> section of the Domain resource YAML file are environment specific and often require information from your Kubernetes cluster administrator to provide the information. See 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/usage/#persistent-volume-and-persistent-volume-claim"
   
   >
Persistent volume and Persistent Volume Claim
</a>
 in the user documentation for more details.</li>
<li>You must use a storage provider that supports the <code>ReadWriteMany</code> option.</li>
<li>This sample will automatically set the owner of all files in the domain home on the persistent
volume to <code>uid 1000</code>. If you want to use a different user, configure the desired <code>runAsUser</code> and
<code>runAsGroup</code> in the security context under the <code>spec.serverPod.podSecurityContext</code> section of the Domain YAML file.
The operator will use these values when setting the owner for files in the domain home directory.</li>
</ul>
<p>After the Domain is deployed, the operator creates the PV and PVC (if they are configured and do not already exist) and starts an &lsquo;introspector job&rsquo; that converts your models included in the <code>domain creation image</code> and <code>config map</code> into a WebLogic configuration to initialize the Domain on PV.</p>
<h3 id="domain-creation-image">Domain creation image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>The sample uses a <code>domain creation image</code> with the name <code>wdt-domain-image:WLS-v1</code> that you created in the 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/build-domain-creation-image/#build-the-domain-creation-image"
   
   >
Build the domain creation image
</a>
 step. The WDT model files in this image define the initial WebLogic Domain on PV configuration. The image contains:</p>
<ul>
<li>The directory where the WebLogic Deploy Tooling software is installed (also known as WDT Home), expected in an image&rsquo;s <code>/auxiliary/weblogic-deploy</code> directory, by default.</li>
<li>WDT model YAML, property, and archive files, expected in the directory <code>/auxiliary/models</code>, by default.</li>
</ul>
<h3 id="deploy-resources---introduction">Deploy resources - Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>In this section, you will define the PV and PVC configuration and reference the <code>domain creation image</code> created earlier in the domain resource YAML file. You will then deploy the domain resource YAML file to the namespace <code>sample-domain1-ns</code>, including the following steps:</p>
<ul>
<li>Create a Secret containing your WebLogic administrator user name and password.</li>
<li>If your domain type is <code>JRF</code>, create secrets containing your RCU access URL, credentials, prefix and DBA password.</li>
<li>Deploy a Domain YAML file that references the PV/PVC configuration and a <code>domain creation image</code> under the <code>spec.configuration.initializeDomainOnPV</code> section.</li>
<li>Wait for the PV and PVC to be created if they do not already exist.</li>
<li>Wait for domain&rsquo;s Pods to start and reach their ready state.</li>
</ul>
<h4 id="secrets">Secrets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>First, create the secrets needed by both WLS and JRF type model domains. You have to create the &ldquo;WebLogic credentials secret&rdquo; and any other secrets that are referenced from the macros in the WDT model file. For more details about using macros in the WDT model files, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/model-files/"
   
   >
Working with the WDT model files
</a>
.</p>
<p>Run the following <code>kubectl</code> commands to deploy the required secrets:</p>
<p><strong>NOTE</strong>: Substitute a password of your choice for <code>MY_WEBLOGIC_ADMIN_PASSWORD</code>. This
password should contain at least seven letters plus one digit.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns create secret generic <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-weblogic-credentials <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>username<span style="color:#f92672">=</span>weblogic --from-literal<span style="color:#f92672">=</span>password<span style="color:#f92672">=</span>MY_WEBLOGIC_ADMIN_PASSWORD</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns label  secret <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-weblogic-credentials <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  weblogic.domainUID<span style="color:#f92672">=</span>sample-domain1</span></span></code></pre></div>
<p>Some important details about these secrets:</p>
<ul>
<li>The WebLogic credentials secret is required and must contain <code>username</code> and <code>password</code> fields. You reference it in <code>spec.webLogicCredentialsSecret</code> field of Domain YAML file and macros in the <code>domainInfo.AdminUserName</code> and <code>domainInfo.AdminPassWord</code> fields your model YAML file.</li>
<li>Delete a secret before creating it, otherwise the create command will fail if the secret already exists..</li>
<li>Name and label the secrets using their associated domain UID to clarify which secrets belong to which domains and make it easier to clean up a domain.</li>
</ul>
<p>If you&rsquo;re following the <code>JRF</code> path through the sample, then you also need to deploy the additional secret referenced by macros in the JRF model <code>RCUDbInfo</code> clause, plus an <code>OPSS</code> wallet password secret. For details about the uses of these secrets, see the 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/usage/"
   
   >
Domain on PV
</a>
 user documentation.</p>

<details class="box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Click here for the commands for deploying additional secrets for JRF.
  </summary>
  <div class="box-content">
<p><strong>NOTE</strong>: Replace <code>MY_RCU_SCHEMA_PASSWORD</code> with the RCU schema password and <code>MY_DBA_PASSWORD</code> with the DBA password of the database
that you chose in the prerequisite steps when


<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/prerequisites/#additional-prerequisites-for-jrf-domains"
   
   >
setting up JRF
</a>
.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns create secret generic <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-rcu-access <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>rcu_prefix<span style="color:#f92672">=</span>FMW1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>rcu_schema_password<span style="color:#f92672">=</span>MY_RCU_SCHEMA_PASSWORD <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>rcu_db_conn_string<span style="color:#f92672">=</span>oracle-db.default.svc.cluster.local:1521/devpdb <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>dba_user<span style="color:#f92672">=</span>sys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>dba_password<span style="color:#f92672">=</span>MY_DBA_PASSWORD     </span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns label  secret <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-rcu-access <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  weblogic.domainUID<span style="color:#f92672">=</span>sample-domain1</span></span></code></pre></div>
<p><strong>NOTES</strong>:</p>
<ul>
<li>Replace <code>MY_OPSS_WALLET_PASSWORD</code> with a password of your choice.
The password can contain letters and digits.</li>
<li>The domain&rsquo;s JRF RCU schema will be automatically initialized
plus generate a JRF OPSS wallet file upon first use.
If you plan to save and reuse this wallet file,
as is necessary for reusing RCU schema data after a migration or restart,
then it will also be necessary to use this same password again.</li>
</ul>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns create secret generic <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-opss-wallet-password-secret <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>   --from-literal<span style="color:#f92672">=</span>walletPassword<span style="color:#f92672">=</span>MY_OPSS_WALLET_PASSWORD</span></span></code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n sample-domain1-ns label  secret <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  sample-domain1-opss-wallet-password-secret <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span>  weblogic.domainUID<span style="color:#f92672">=</span>sample-domain1</span></span></code></pre></div>
  </div>
</details>
<h4 id="domain-resource">Domain resource<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>Now, you deploy a <code>sample-domain1</code> domain resource and an associated <code>sample-domain1-cluster-1</code> cluster resource using a single YAML resource file which defines both resources. The domain resource and cluster resource tells the operator how to deploy a WebLogic domain. They do not replace the traditional WebLogic configuration files, but instead cooperate with those files to describe the Kubernetes artifacts of the corresponding domain.</p>
<p>Copy the contents of the 

<a href="https://raw.githubusercontent.com/oracle/weblogic-kubernetes-operator/main/kubernetes/samples/scripts/create-weblogic-domain/domain-on-pv/domain-resources/WLS/domain-on-pv-WLS-v1.yaml"
   
   
target="_blank" rel="noopener noreferrer"
>
WLS domain resource YAML file
</a>
 file that is included in the sample source to a file called <code>/tmp/sample/domain-resource.yaml</code> or similar.</p>
<p>Click 

<a href="https://raw.githubusercontent.com/oracle/weblogic-kubernetes-operator/main/kubernetes/samples/scripts/create-weblogic-domain/domain-on-pv/domain-resources/WLS/domain-on-pv-WLS-v1.yaml"
   
   
target="_blank" rel="noopener noreferrer"
>
here
</a>
 to view the WLS Domain YAML file.</p>
<p>Click 

<a href="https://raw.githubusercontent.com/oracle/weblogic-kubernetes-operator/main/kubernetes/samples/scripts/create-weblogic-domain/domain-on-pv/domain-resources/JRF/domain-on-pv-JRF-v1.yaml"
   
   
target="_blank" rel="noopener noreferrer"
>
here
</a>
 to view the JRF Domain YAML file.</p>
<p>Modify the PV and PVC specifications defined in the <code>spec.configuration.initializeDomainOnPV</code> section of the Domain resource YAML file based on your environment. These specifications often require your Kubernetes cluster administrator to provide the information. See 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-on-pv/usage/#persistent-volume-and-persistent-volume-claim"
   
   >
Persistent volume and Persistent Volume Claim
</a>
 in the user documentation for more details.</p>

<details open class="box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>By default, this sample creates a Persistent Volume (PV) of type <code>hostPath</code>. This works only for a single node Kubernetes cluster for testing or proof of concept activities. In a multinode Kubernetes cluster, consider using a Kubernetes <code>StorageClass</code>, or PV of <code>nfs</code> type. If you use Oracle Container Engine for Kubernetes (OKE) and plan to use Oracle Cloud Infrastructure File Storage (FSS) for PV, then Oracle recommends creating a <code>StorageClass</code> and specifying the name of the <code>StorageClass</code> in your PersistentVolumeClaim (PVC) configuration in the <code>initializeDomainOnPV</code> section. See 

<a href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengcreatingpersistentvolumeclaim_Provisioning_PVCs_on_FSS.htm#Provisioning_Persistent_Volume_Claims_on_the_FileStorageService"
   
   
target="_blank" rel="noopener noreferrer"
>
Provisioning PVCs on the File Storage Service (FSS)
</a>
 in the OCI documentation for more details.</p>
  </div>
</details>
<p><strong>NOTE</strong>: Before you deploy the domain custom resource, ensure all nodes in your Kubernetes cluster 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/#ensuring-your-kubernetes-cluster-can-access-images"
   
   >
can access <code>domain-creation-image</code> and other images
</a>
.</p>
<p>Run the following command to apply the two sample resources.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f /tmp/sample/domain-resource.yaml</span></span></code></pre></div>
<p>The domain resource references the cluster resource, a WebLogic Server installation image, the secrets you defined, PV and PVC configuration details, and a sample <code>domain creation image</code>, which contains a traditional WebLogic configuration and a WebLogic application. For detailed information, see 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/domain-resource/"
   
   >
Domain and cluster resources
</a>
.</p>
<h3 id="verify-the-pv-pvc-and-domain">Verify the PV, PVC, and domain<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>To confirm that the PV, PVC, and domain were created, use the following instructions.</p>
<h4 id="verify-the-persistent-volume">Verify the persistent volume<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If the <code>spec.configuration.initializeDomainOnPV.persistentVolume</code> is configured for the operator to create the PV, then verify that a PV with the given name is created and is in <code>Bound</code> status. If the PV already exists, then ensure that the existing PV is in <code>Bound</code> status.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pv</span></span></code></pre></div>
<p>Here is an example output of this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>NAME                                CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                                  STORAGECLASS   REASON   AGE
sample-domain1-weblogic-sample-pv   5Gi        RWX            Retain           Bound    sample-domain1-ns/sample-domain1-weblogic-sample-pvc   manual                  14m</code></pre></div>
<h4 id="verify-the-persistent-volume-claim">Verify the persistent volume claim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If the <code>spec.configuration.initializeDomainOnPV.persistentVolumeClaim</code> is configured for the operator to create the PVC, then verify that the PVC with the given name is created and is in <code>Bound</code> status. If the PVC already exists, then ensure that the existing PVC is in <code>Bound</code> status.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pvc -n sample-domain1-ns</span></span></code></pre></div>
<p>Here is an example output of this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>NAME                                 STATUS   VOLUME                              CAPACITY   ACCESS MODES   STORAGECLASS   AGE
sample-domain1-weblogic-sample-pvc   Bound    sample-domain1-weblogic-sample-pv   5Gi        RWX            manual         11m</code></pre></div>
<h4 id="verify-the-domain">Verify the domain<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>Run the following <code>kubectl describe domain</code> command to check the status and events for the created domain.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl describe domain sample-domain1 -n sample-domain1-ns</span></span></code></pre></div>

<details class="box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Click here to see an example of the output of this command.
  </summary>
  <div class="box-content">
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>Name:         sample-domain1
Namespace:    sample-domain1-ns
Labels:       weblogic.domainUID=sample-domain1
Annotations:  &lt;none&gt;
API Version:  weblogic.oracle/v9
Kind:         Domain
Metadata:
  Creation Timestamp:  2023-04-28T20:31:09Z
  Generation:          1
  Resource Version:  345297
  UID:               69b69019-c430-4f01-b96c-4364bf1f39c1
Spec:
  Clusters:
    Name:  sample-domain1-cluster-1
  Configuration:
    Initialize Domain On PV:
      Domain:
        Create If Not Exists:  domain
        Domain Creation Images:
          Image:      phx.ocir.io/weblogick8s/domain-on-pv-image:WLS-v1
        Domain Type:  WLS
      Persistent Volume:
        Metadata:
          Name:  sample-domain1-weblogic-sample-pv
        Spec:
          Capacity:
            Storage:  5Gi
          Host Path:
            Path:              /shared
          Storage Class Name:  manual
      Persistent Volume Claim:
        Metadata:
          Name:  sample-domain1-weblogic-sample-pvc
        Spec:
          Resources:
            Requests:
              Storage:               1Gi
          Storage Class Name:        manual
          Volume Name:               sample-domain1-weblogic-sample-pv
    Override Distribution Strategy:  Dynamic
  Domain Home:                       /shared/domains/sample-domain1
  Domain Home Source Type:           PersistentVolume
  Failure Retry Interval Seconds:    120
  Failure Retry Limit Minutes:       1440
  Http Access Log In Log Home:       true
  Image:                             container-registry.oracle.com/middleware/weblogic:14.1.2.0-generic-jdk17-ol8
  Image Pull Policy:                 IfNotPresent
  Include Server Out In Pod Log:     true
  Introspect Version:                1
  Log Home Layout:                   ByServers
  Max Cluster Concurrent Shutdown:   1
  Max Cluster Concurrent Startup:    0
  Max Cluster Unavailable:           1
  Replicas:                          1
  Restart Version:                   1
  Server Pod:
    Env:
      Name:   CUSTOM_DOMAIN_NAME
      Value:  domain1
      Name:   JAVA_OPTIONS
      Value:  -Dweblogic.StdoutDebugEnabled=false
      Name:   USER_MEM_ARGS
      Value:  -Djava.security.egd=file:/dev/./urandom -Xms256m -Xmx512m
    Resources:
      Requests:
        Cpu:     250m
        Memory:  768Mi
    Volume Mounts:
      Mount Path:  /shared
      Name:        weblogic-domain-storage-volume
    Volumes:
      Name:  weblogic-domain-storage-volume
      Persistent Volume Claim:
        Claim Name:     sample-domain1-weblogic-sample-pvc
  Server Start Policy:  IfNeeded
  Web Logic Credentials Secret:
    Name:  sample-domain1-weblogic-credentials
Status:
  Clusters:
    Cluster Name:  cluster-1
    Conditions:
      Last Transition Time:  2023-04-28T20:33:57.983431Z
      Status:                True
      Type:                  Available
      Last Transition Time:  2023-04-28T20:33:57.983495Z
      Status:                True
      Type:                  Completed
    Label Selector:          weblogic.domainUID=sample-domain1,weblogic.clusterName=cluster-1
    Maximum Replicas:        5
    Minimum Replicas:        0
    Observed Generation:     1
    Ready Replicas:          2
    Replicas:                2
    Replicas Goal:           2
  Conditions:
    Last Transition Time:  2023-04-28T20:33:53.450209Z
    Status:                True
    Type:                  Available
    Last Transition Time:  2023-04-28T20:33:58.076050Z
    Status:                True
    Type:                  Completed
  Observed Generation:     1
  Replicas:                2
  Servers:
    Health:
      Activation Time:  2023-04-28T20:33:01.803000Z
      Overall Health:   ok
      Subsystems:
        Subsystem Name:  ServerRuntime
        Symptoms:
    Node Name:     phx32822d1
    Pod Phase:     Running
    Pod Ready:     True
    Server Name:   admin-server
    State:         RUNNING
    State Goal:    RUNNING
    Cluster Name:  cluster-1
    Health:
      Activation Time:  2023-04-28T20:33:40.165000Z
      Overall Health:   ok
      Subsystems:
    Node Name:     phx32822d1
    Pod Phase:     Running
    Pod Ready:     True
    Server Name:   managed-server1
    State:         RUNNING
    State Goal:    RUNNING
    Cluster Name:  cluster-1
    Health:
      Activation Time:  2023-04-28T20:33:44.225000Z
      Overall Health:   ok
      Subsystems:
    Node Name:     phx32822d1
    Pod Phase:     Running
    Pod Ready:     True
    Server Name:   managed-server2
    State:         RUNNING
    State Goal:    RUNNING
    Cluster Name:  cluster-1
    Server Name:   managed-server3
    State:         SHUTDOWN
    State Goal:    SHUTDOWN
    Cluster Name:  cluster-1
    Server Name:   managed-server4
    State:         SHUTDOWN
    State Goal:    SHUTDOWN
    Cluster Name:  cluster-1
    Server Name:   managed-server5
    State:         SHUTDOWN
    State Goal:    SHUTDOWN
  Start Time:      2023-04-28T20:32:02.339082Z
Events:
  Type     Reason                      Age    From               Message
  ----     ------                      ----   ----               -------
  Warning  Failed                      4m7s   weblogic.operator  Domain sample-domain1 failed due to &#39;Persistent volume claim unbound&#39;: PersistentVolumeClaim &#39;sample-domain1-weblogic-sample-pvc&#39; is not bound; the status phase is &#39;Pending&#39;.. Operator is waiting for the persistent volume claim to be bound, it may be a temporary condition. If this condition persists, then ensure that the PVC has a correct volume name or storage class name and is in bound status..
  Normal   PersistentVolumeClaimBound  3m57s  weblogic.operator  The persistent volume claim is bound and ready.
  Normal   Available                   2m16s  weblogic.operator  Domain sample-domain1 is available: a sufficient number of its servers have reached the ready state.
  Normal   Completed                   2m11s  weblogic.operator  Domain sample-domain1 is complete because all of the following are true: there is no failure detected, there are no pending server shutdowns, and all servers expected to be running are ready and at their target image, auxiliary images, restart version, and introspect version.</code></pre></div>
  </div>
</details>
<p>In the <code>Status</code> section of the output, the available servers and clusters are listed.  Note that if this command is issued very soon after the domain resource is applied, there may be no servers available yet, or perhaps only the Administration Server but no Managed Servers.  The operator will start up the Administration Server first and wait for it to become ready before starting the Managed Servers.</p>
<h3 id="verify-the-pods">Verify the pods<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>If you run <code>kubectl get pods -n sample-domain1-ns --watch</code>, then you will see the introspector job run and your WebLogic Server pods start. The output will look something like this:

<details class="box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Click here to expand.
  </summary>
  <div class="box-content">
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get pods -n sample-domain1-ns --watch
</span></span><span style="display:flex;"><span>NAME                                         READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>sample-domain1-introspector-lqqj9   0/1   Pending   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-introspector-lqqj9   0/1   ContainerCreating   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-introspector-lqqj9   1/1   Running   <span style="color:#ae81ff">0</span>     1s
</span></span><span style="display:flex;"><span>sample-domain1-introspector-lqqj9   0/1   Completed   <span style="color:#ae81ff">0</span>     65s
</span></span><span style="display:flex;"><span>sample-domain1-introspector-lqqj9   0/1   Terminating   <span style="color:#ae81ff">0</span>     65s
</span></span><span style="display:flex;"><span>sample-domain1-admin-server   0/1   Pending   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-admin-server   0/1   ContainerCreating   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-admin-server   0/1   Running   <span style="color:#ae81ff">0</span>     1s
</span></span><span style="display:flex;"><span>sample-domain1-admin-server   1/1   Running   <span style="color:#ae81ff">0</span>     32s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server1   0/1   Pending   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server2   0/1   Pending   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server1   0/1   ContainerCreating   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server2   0/1   ContainerCreating   <span style="color:#ae81ff">0</span>     0s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server1   0/1   Running   <span style="color:#ae81ff">0</span>     2s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server2   0/1   Running   <span style="color:#ae81ff">0</span>     2s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server1   1/1   Running   <span style="color:#ae81ff">0</span>     43s
</span></span><span style="display:flex;"><span>sample-domain1-managed-server2   1/1   Running   <span style="color:#ae81ff">0</span>     42s</span></span></code></pre></div>
  </div>
</details></p>
<p>For a more detailed view of this activity,
you can use the <code>waitForDomain.sh</code> sample lifecycle script.
This script provides useful information about a domain&rsquo;s pods and
optionally waits for its <code>Completed</code> status condition to become <code>True</code>.
A <code>Completed</code> domain indicates that all of its expected
pods have reached a <code>ready</code> state
plus their target <code>restartVersion</code>, <code>introspectVersion</code>, and <code>image</code>.
For example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /tmp/weblogic-kubernetes-operator/kubernetes/samples/scripts/domain-lifecycle
</span></span><span style="display:flex;"><span>$ ./waitForDomain.sh -n sample-domain1-ns -d sample-domain1 -p Completed</span></span></code></pre></div>
<p>If you see an error, then consult 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/debugging/"
   
   >
Debugging
</a>
.</p>
<h3 id="verify-the-services">Verify the services<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Use the following command to see the services for the domain:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get services -n sample-domain1-ns</span></span></code></pre></div>
<p>Here is an example output of this command:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>NAME                               TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
sample-domain1-admin-server        ClusterIP   None             &lt;none&gt;        7001/TCP   10m
sample-domain1-cluster-cluster-1   ClusterIP   10.107.178.255   &lt;none&gt;        8001/TCP   9m49s
sample-domain1-managed-server1     ClusterIP   None             &lt;none&gt;        8001/TCP   9m49s
sample-domain1-managed-server2     ClusterIP   None             &lt;none&gt;        8001/TCP   9m43s</code></pre></div>
<h3 id="invoke-the-web-application">Invoke the web application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Now that all the sample resources have been deployed, you can invoke the sample web application through the Traefik ingress controller&rsquo;s NodePort.</p>
<ul>
<li>
<p>Send a web application request to the load balancer URL for the application, as shown in the following example.</p>
<div class="tab-panel" data-tab-group="R-tabs-2245023265ae4cf87d02c8b6ba991139">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      aria-controls="R-tab-id-a08b3ca8186945a74f805cee7366b9b3" aria-expanded="true"
      data-tab-item="R-tab-c7b7e00ef80c3ee3776df36d1adf8009"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('R-tabs-2245023265ae4cf87d02c8b6ba991139','R-tab-c7b7e00ef80c3ee3776df36d1adf8009')"
    >
      <span class="tab-nav-text">Request from a local machine</span>
    </button>
    <button
      aria-controls="R-tab-id-1bdbb488d0fee8a8ea90329075af54b9" aria-expanded="false"
      data-tab-item="R-tab-ab177d57cfe5397b5d9f9427fba88286"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('R-tabs-2245023265ae4cf87d02c8b6ba991139','R-tab-ab177d57cfe5397b5d9f9427fba88286')"
    >
      <span class="tab-nav-text">Request from a remote machine</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      id="R-tab-id-a08b3ca8186945a74f805cee7366b9b3"
      data-tab-item="R-tab-c7b7e00ef80c3ee3776df36d1adf8009"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<pre><code>    $ curl -s -S -m 10 -H 'host: sample-domain1-cluster-cluster-1.sample.org' http://localhost:30305/myapp_war/index.jsp
</code></pre>
      </div>
    </div>
    <div
      id="R-tab-id-1bdbb488d0fee8a8ea90329075af54b9"
      data-tab-item="R-tab-ab177d57cfe5397b5d9f9427fba88286"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<pre><code>    $ K8S_CLUSTER_ADDRESS=$(kubectl cluster-info | grep DNS | sed 's/^.*https:\/\///g' | sed 's/:.*$//g')

    $ curl -s -S -m 10 -H 'host: sample-domain1-cluster-cluster-1.sample.org' http://${K8S_CLUSTER_ADDRESS}:30305/myapp_war/index.jsp
</code></pre>
      </div>
    </div>
  </div>
</div>
</li>
<li>
<p>You will see output like the following:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>   &lt;<span style="color:#f92672">html</span>&gt;&lt;<span style="color:#f92672">body</span>&gt;&lt;<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>   *****************************************************************
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Hello World! This is version &#39;v1&#39; of the sample JSP web-app.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Welcome to WebLogic Server &#39;managed-server2&#39;!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     domain UID  = &#39;sample-domain1&#39;
</span></span><span style="display:flex;"><span>     domain name = &#39;domain1&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Found 1 local cluster runtime:
</span></span><span style="display:flex;"><span>     Cluster &#39;cluster-1&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Found min threads constraint runtime named &#39;SampleMinThreads&#39; with configured count: 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Found max threads constraint runtime named &#39;SampleMaxThreads&#39; with configured count: 10
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Found 0 local data sources:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   *****************************************************************
</span></span><span style="display:flex;"><span>   &lt;/<span style="color:#f92672">pre</span>&gt;&lt;/<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div>
</li>
</ul>
<h3 id="clean-up-resources-and-remove-the-generated-domain-home">Clean up resources and remove the generated domain home<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Follow the cleanup instructions 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/cleanup/"
   
   >
here
</a>
 to remove the domain, cluster and other associated resources.</p>
<p>Sometimes in production, but most likely in testing environments, you might also want to remove the Domain on PV contents that are generated using this sample.
You can use the <code>pv-pvc-helper.sh</code> helper script in the domain lifecycle directory for this.
The script launches a Kubernetes pod named <code>pvhelper</code> using the provided persistent volume claim name and the mount path.
You can run <code>kubectl exec</code> to get a shell to the running pod container and run commands to examine or clean up the
contents of shared directories on the persistent volume.
For example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd /tmp/weblogic-kubernetes-operator/kubernetes/samples/scripts/domain-lifecycle
</span></span><span style="display:flex;"><span>$ ./pv-pvc-helper.sh -n sample-domain1-ns -r -c sample-domain1-weblogic-sample-pvc -m /shared</span></span></code></pre></div>

<details class="box cstyle notices transparent expand">
  <summary class="box-label">
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 
    Click here to see the output.
  </summary>
  <div class="box-content">
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>[2023-04-28T21:02:42.851294126Z][INFO] Creating pod &#39;pvhelper&#39; using image &#39;ghcr.io/oracle/oraclelinux:8-slim&#39;, persistent volume claim &#39;sample-domain1-weblogic-sample-pvc&#39; and mount path &#39;/shared&#39;.
pod/pvhelper created
[pvhelper] already initialized ..
Checking Pod READY column for State [1/1]
Pod [pvhelper] Status is NotReady Iter [1/120]
Pod [pvhelper] Status is Ready Iter [2/120]
NAME       READY   STATUS    RESTARTS   AGE
pvhelper   1/1     Running   0          10s
[2023-04-28T21:02:58.972826241Z][INFO] Executing &#39;kubectl -n sample-domain1-ns exec -i pvhelper -- ls -l /shared&#39; command to print the contents of the mount path in the persistent volume.
[2023-04-28T21:02:59.115119523Z][INFO] =============== Command output ====================
total 0
drwxr-xr-x 4 1000 root 43 Apr 26 19:41 domains
drwxr-xr-x 4 1000 root 43 Apr 26 19:41 logs
[2023-04-28T21:02:59.118355423Z][INFO] ===================================================
[2023-04-28T21:02:59.121482356Z][INFO] Use command &#39;kubectl -n sample-domain1-ns exec -it pvhelper -- /bin/sh&#39; and cd to &#39;/shared&#39; directory to view or delete the contents on the persistent volume.
[2023-04-28T21:02:59.124658180Z][INFO] Use command &#39;kubectl -n sample-domain1-ns delete pod pvhelper&#39; to delete the pod created by the script.</code></pre></div>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>$ kubectl -n sample-domain1-ns exec -it pvhelper -- /bin/sh
sh-4.4$ cd /shared
sh-4.4$ ls
domains
applications</code></pre></div>
  </div>
</details>
<p>After you get a shell to the running pod container, you can recursively delete the contents of the domain home and applications directories using <code>rm -rf /shared/domains/sample-domain1</code> and <code>rm -rf /shared/applications/sample-domain1</code> commands. Since these commands will actually delete files on the persistent storage, we recommend that you understand and execute these commands carefully.</p>
<h4 id="remove-the-pvc-and-pv">Remove the PVC and PV<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>If the PVC and PV were created by the operator and you don&rsquo;t want to preserve them, then run following command to delete PVC and PV.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>$ kubectl delete pvc sample-domain1-weblogic-sample-pvc -n sample-domain1-ns
$ kubectl delete pv sample-domain1-weblogic-sample-pv</code></pre></div>
<h4 id="delete-the-domain-namespace">Delete the domain namespace.<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>$ kubectl delete namespace sample-domain1-ns</code></pre></div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">


<a id="logo" href="https://oracle.github.io/weblogic-kubernetes-operator/">
  <img src="https://oracle.github.io/weblogic-kubernetes-operator//images/logo.png" height="90"><br/>
  WebLogic Kubernetes Operator
</a>

        </div>
        <search><form action="https://oracle.github.io/weblogic-kubernetes-operator/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/index.html"><b> </b>Quick Start</a><ul id="R-subsections-d63193e927818b6cb77d9c791ea48a61" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/introduction/index.html"><b> </b>Introduction</a><ul id="R-subsections-e1ed3a04f1f57a27be4a8d0eb274be18" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-operators/index.html"><b> </b>Manage operators</a><ul id="R-subsections-7d4cf64999b86ce8197c0bc43769472c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/index.html">Manage domains</a><ul id="R-subsections-45a55625d0c34b621eb1935c75fae249" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/base-images/index.html"><b> </b>WebLogic images</a><ul id="R-subsections-b3440c9f2ce961fe2579290479f05e53" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/index.html"><b> </b>Samples</a><ul id="R-subsections-88c2b1e6419b221ce89c4be4a8ae2a6b" class="collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/credentials/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/credentials/index.html">Credentials</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/storage/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/storage/index.html">Storage</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/database/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/database/index.html">Run a database</a></li>
            <li class="parent alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/index.html">Domains</a><ul id="R-subsections-fe6d3bc53518b5bcddc81ed793317942" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/index.html">Domain on PV</a><ul id="R-subsections-70e5fb4bd695a0cd7035ee2ff42f2cf7" class="collapsible-menu">
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/prerequisites/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/prerequisites/index.html">Prerequisites</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/build-domain-creation-image/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/build-domain-creation-image/index.html">Build domain creation image</a></li>
            <li class="active " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/sample/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/sample/index.html">Sample</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/cleanup/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/domain-home-on-pv/cleanup/index.html">Cleanup</a></li></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/model-in-image/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/model-in-image/index.html">Model in image</a><ul id="R-subsections-9267690d9842e623c0601b1251dc333d" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/delete-domain/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/delete-domain/index.html">Delete resources associated with the domain</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/lifecycle/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/domains/lifecycle/index.html">Domain lifecycle operations</a></li></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/rest/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/rest/index.html">REST APIs</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/ingress/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/ingress/index.html">Ingress</a></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/elastic-stack/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/elastic-stack/index.html">Elastic Stack</a><ul id="R-subsections-3eee08beed8e21e290aa1f4316f1c391" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/azure-kubernetes-service/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/azure-kubernetes-service/index.html">Azure Kubernetes Service</a><ul id="R-subsections-d57c7e28d3596876cc4763e66b41d50e" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/samples/tanzu-kubernetes-service/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/samples/tanzu-kubernetes-service/index.html">Tanzu Kubernetes Service</a></li></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/developerguide/index.html"><b> </b>Developer Guide</a><ul id="R-subsections-6d5a8d333894e1a8a4ced31c7a69170c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/reference/index.html"><b> </b>Reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/security/index.html"><b> </b>Security</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/faq/index.html">Frequently asked questions</a><ul id="R-subsections-24e4fc446616bf2bbeac7b1dba804bb8" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/deprecated-functionality/index.html">Deprecated functionality</a></li>
            <li class="" data-nav-url="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html"><a class="padding" href="https://oracle.github.io/weblogic-kubernetes-operator/known-limitations/index.html">Known limitations</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer">

<p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-kubernetes-operator"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #weblogic</a></p>
</div>
      </div>
    </aside>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/perfect-scrollbar/perfect-scrollbar.min.js?1767757626" defer></script>
    <script src="https://oracle.github.io/weblogic-kubernetes-operator/js/theme.min.js?1767757626" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
